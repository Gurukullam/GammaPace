<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IELTS General Listening Part 3 - Practice 6: Educational Planning</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.3) 0%, rgba(139, 69, 19, 0.2) 50%, rgba(255, 215, 0, 0.1) 100%);
            min-height: 100vh;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 20%, rgba(255, 215, 0, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(212, 175, 55, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 60%, rgba(139, 69, 19, 0.05) 0%, transparent 50%);
            z-index: -1;
            pointer-events: none;
        }

        /* Header spacing */
        .header-spacer {
            height: 20px;
            width: 100%;
        }

        /* Guruvammal Logo as Back Button */
        .gk-logo-container {
            position: fixed;
            top: 30px;
            right: 30px;
            z-index: 1002;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.3rem;
            cursor: pointer;
            padding: 5px;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .gk-logo-container:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(139, 69, 19, 0.3);
        }

        .master-guruvammal-logo {
            position: relative;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
            box-sizing: border-box;
            font-family: 'Century Gothic', sans-serif;
            font-size: 26px;
            font-weight: 900;
            letter-spacing: -1px;
            line-height: 1;
            color: #5d3a0a;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.3);
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(139, 69, 19, 0.25) 50%, rgba(205, 133, 63, 0.2) 100%);
            backdrop-filter: blur(10px);
            border-radius: 6px;
            padding: 10px;
            box-shadow: 0 8px 25px rgba(139, 69, 19, 0.3), 0 0 40px rgba(212, 175, 55, 0.2);
            z-index: 10000;
            transition: all 0.3s ease;
        }

        .master-guruvammal-logo .musical-corner {
            position: absolute;
            top: 2px;
            right: 3px;
            font-size: 10px;
            color: #5d3a0a;
            font-weight: 900;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.3);
        }

        .master-guruvammal-logo:hover {
            transform: scale(1.1);
            box-shadow: 0 10px 30px rgba(139, 69, 19, 0.4), 0 0 50px rgba(212, 175, 55, 0.3);
        }

        .back-label {
            font-size: 0.75rem;
            font-weight: 600;
            color: #8b4513;
            font-family: 'Century Gothic', sans-serif;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.8);
            text-align: center;
            transition: all 0.3s ease;
        }

        .gk-logo-container:hover .back-label {
            color: #5d3a0a;
            transform: translateY(-1px);
        }

        /* Container with menu support */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            margin-left: 360px;
            transition: margin-left 0.3s ease;
        }

        .container.menu-collapsed {
            margin-left: 20px;
        }

        /* Main Content */
        .main-content {
            margin-top: 0;
            padding: 1.5rem 2rem;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Professional Slide-out Menu */
        .slide-menu {
            position: fixed;
            left: 0;
            top: 0;
            width: 340px;
            height: 100vh;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(248, 249, 250, 0.95) 100%);
            backdrop-filter: blur(20px);
            border-right: 3px solid rgba(212, 175, 55, 0.3);
            box-shadow: 8px 0 30px rgba(139, 69, 19, 0.15);
            z-index: 1000;
            overflow-y: auto;
            transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            transform: translateX(0);
        }

        .slide-menu.collapsed {
            transform: translateX(-340px);
        }

        .menu-header {
            background: linear-gradient(135deg, #8b4513, #d4af37);
            color: white;
            padding: 2rem 1.5rem 1.5rem;
            border-bottom: 2px solid rgba(139, 69, 19, 0.3);
            position: relative;
            overflow: hidden;
        }

        .menu-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 20%, rgba(212, 175, 55, 0.1) 0%, transparent 40%),
                radial-gradient(circle at 80% 80%, rgba(255, 215, 0, 0.15) 0%, transparent 40%);
            pointer-events: none;
        }

        .menu-title {
            font-size: 1.4rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            position: relative;
            z-index: 1;
        }

        .menu-subtitle {
            font-size: 0.9rem;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        .menu-content {
            padding: 1.5rem 0;
        }

        .menu-item {
            display: block;
            padding: 1rem 1.5rem;
            text-decoration: none;
            color: #333;
            border-bottom: 1px solid rgba(212, 175, 55, 0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .menu-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(135deg, #8b4513, #d4af37);
            transform: scaleY(0);
            transition: transform 0.3s ease;
        }

        .menu-item:hover {
            background: rgba(212, 175, 55, 0.08);
            color: #8b4513;
            transform: translateX(8px);
        }

        .menu-item:hover::before {
            transform: scaleY(1);
        }

        .item-title {
            font-weight: 600;
            font-size: 1rem;
            margin-bottom: 0.2rem;
        }

        .item-description {
            font-size: 0.85rem;
            color: #666;
            line-height: 1.4;
        }

        /* Menu Toggle Button */
        .menu-toggle {
            position: fixed;
            top: 30px;
            left: 360px;
            background: linear-gradient(135deg, #8b4513, #d4af37);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.2rem;
            z-index: 1001;
            box-shadow: 0 4px 15px rgba(139, 69, 19, 0.3);
            transition: all 0.3s ease;
        }

        .menu-toggle:hover {
            background: linear-gradient(135deg, #d4af37, #ffd700);
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(139, 69, 19, 0.4);
        }

        .menu-toggle.collapsed {
            left: 30px;
        }

        /* Hero Section */
        .hero-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 3rem 2rem;
            text-align: center;
            margin-bottom: 3rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 30% 30%, rgba(212, 175, 55, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 70% 70%, rgba(139, 69, 19, 0.08) 0%, transparent 50%);
            pointer-events: none;
        }

        .hero-title {
            font-size: 2.8rem;
            font-weight: 900;
            color: #8b4513;
            margin-bottom: 1rem;
            position: relative;
            z-index: 1;
        }

        .hero-subtitle {
            font-size: 1.4rem;
            color: #666;
            margin-bottom: 1.5rem;
            position: relative;
            z-index: 1;
        }

        .hero-description {
            font-size: 1.1rem;
            color: #555;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.7;
            position: relative;
            z-index: 1;
        }

        /* Section Styles */
        .content-section {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 2.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            border-left: 5px solid #d4af37;
        }

        .section-title {
            color: #8b4513;
            font-size: 2rem;
            margin-bottom: 1.5rem;
            text-align: center;
            border-bottom: 3px solid #d4af37;
            padding-bottom: 0.5rem;
        }

        .speakers-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .speaker-card {
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.1), rgba(255, 215, 0, 0.05));
            padding: 20px;
            border-radius: 12px;
            border: 2px solid #d4af37;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .speaker-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.3);
        }

        .speaker-card.active {
            border-color: #8b4513;
            background: linear-gradient(135deg, rgba(139, 69, 19, 0.1), rgba(212, 175, 55, 0.1));
            transform: scale(1.02);
        }

        .speaker-name {
            font-size: 1.3em;
            font-weight: bold;
            color: #5d3a0a;
            margin-bottom: 8px;
        }

        .speaker-role {
            color: #8b4513;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .speaker-details {
            color: #666;
            font-size: 0.95em;
            line-height: 1.5;
        }

        .conversation-context {
            background: rgba(255, 215, 0, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #d4af37;
        }

        /* Audio Player Styles */
        .play-btn {
            background: linear-gradient(135deg, #8b4513, #d4af37);
            color: white;
            border: none;
            padding: 1rem 2.5rem;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.2rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(139, 69, 19, 0.4);
            margin-bottom: 1rem;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        .play-btn:hover:not(:disabled) {
            background: linear-gradient(135deg, #d4af37, #ffd700);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(139, 69, 19, 0.6);
        }

        .play-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .progress-container {
            background: rgba(139, 69, 19, 0.1);
            border-radius: 10px;
            padding: 0.5rem;
            margin-top: 1rem;
        }

        .progress-bar {
            background: #e0e0e0;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }

        .progress-fill {
            background: linear-gradient(90deg, #8b4513, #d4af37);
            height: 100%;
            width: 0%;
            transition: width 0.2s ease;
        }

        .time-display {
            text-align: center;
            font-size: 0.9rem;
            color: #8b4513;
            font-weight: 600;
        }

        .question-group {
            margin-bottom: 35px;
            padding: 20px;
            background: rgba(255, 215, 0, 0.05);
            border-radius: 12px;
            border: 1px solid #d4af37;
        }

        .question-group-title {
            font-size: 1.2em;
            color: #8b4513;
            margin-bottom: 20px;
            font-weight: bold;
            text-align: center;
        }

        .question {
            margin-bottom: 25px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            border-left: 4px solid #d4af37;
        }

        .question-number {
            font-weight: bold;
            color: #5d3a0a;
            margin-bottom: 10px;
        }

        .question-text {
            margin-bottom: 15px;
            font-size: 1.05em;
            line-height: 1.6;
        }

        .sentence-completion-input {
            background: white;
            border: 2px solid #d4af37;
            border-radius: 6px;
            padding: 8px 12px;
            margin-left: 10px;
            min-width: 150px;
            font-size: 16px;
        }

        .sentence-completion-input:focus {
            outline: none;
            border-color: #8b4513;
            box-shadow: 0 0 5px rgba(212, 175, 55, 0.3);
        }

        .matching-container {
            background: rgba(255, 215, 0, 0.05);
            border: 2px solid #d4af37;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }

        .matching-title {
            text-align: center;
            font-size: 1.1em;
            font-weight: bold;
            color: #8b4513;
            margin-bottom: 20px;
        }

        .matching-question {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding: 10px;
            background: white;
            border-radius: 8px;
            border-left: 4px solid #d4af37;
        }

        .matching-select {
            background: white;
            border: 2px solid #d4af37;
            border-radius: 6px;
            padding: 8px 12px;
            margin-left: 15px;
            min-width: 120px;
            font-size: 16px;
        }

        .matching-select:focus {
            outline: none;
            border-color: #8b4513;
            box-shadow: 0 0 5px rgba(212, 175, 55, 0.3);
        }

        .options-list {
            background: rgba(139, 69, 19, 0.05);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }

        .options-list h4 {
            color: #8b4513;
            margin-bottom: 10px;
            font-size: 1em;
        }

        .options-list ul {
            list-style: none;
            padding: 0;
        }

        .options-list li {
            margin-bottom: 5px;
            padding-left: 20px;
            position: relative;
        }

        .options-list li::before {
            content: attr(data-letter);
            position: absolute;
            left: 0;
            color: #8b4513;
            font-weight: bold;
        }

        .submit-btn {
            background: linear-gradient(135deg, #8b4513, #5d3a0a);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            transition: all 0.3s ease;
            display: block;
            margin: 30px auto;
        }

        .submit-btn:hover {
            background: linear-gradient(135deg, #5d3a0a, #8b4513);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(139, 69, 19, 0.4);
        }

        .score-display {
            text-align: center;
            margin-bottom: 2rem;
            padding: 2rem;
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.1), rgba(255, 215, 0, 0.05));
            border-radius: 15px;
            border: 2px solid #d4af37;
        }

        .score-number {
            font-size: 3rem;
            font-weight: bold;
            color: #8b4513;
            margin-bottom: 0.5rem;
        }

        .score-text {
            font-size: 1.2rem;
            color: #666;
            margin-top: 0.5rem;
        }

        .answer-review {
            margin-bottom: 2rem;
        }

        .review-item {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            border-left: 4px solid;
        }

        .review-item.correct {
            border-left-color: #28a745;
            background: rgba(40, 167, 69, 0.1);
        }

        .review-item.incorrect {
            border-left-color: #dc3545;
            background: rgba(220, 53, 69, 0.1);
        }

        .improvement-tips {
            background: rgba(212, 175, 55, 0.1);
            border-radius: 10px;
            padding: 1.5rem;
            border: 2px solid rgba(212, 175, 55, 0.3);
        }

        .improvement-tips h4 {
            color: #8b4513;
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .improvement-tips ul {
            list-style: none;
            padding: 0;
        }

        .improvement-tips li {
            margin-bottom: 0.8rem;
            padding-left: 1.5rem;
            position: relative;
        }

        .improvement-tips li::before {
            content: '🎓';
            position: absolute;
            left: 0;
            top: 0;
        }

        /* Auto-submit popup styles */
        .auto-submit-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 10000;
            display: none;
            align-items: center;
            justify-content: center;
        }

        .auto-submit-popup {
            background: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.3);
            border: 3px solid #d4af37;
            max-width: 500px;
            margin: 20px;
        }

        .auto-submit-title {
            font-size: 1.8rem;
            color: #8b4513;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .auto-submit-message {
            font-size: 1.1rem;
            color: #333;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .auto-submit-countdown {
            font-size: 2rem;
            color: #d4af37;
            font-weight: bold;
            margin-bottom: 25px;
        }

        .auto-submit-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .auto-submit-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .auto-submit-btn.primary {
            background: linear-gradient(135deg, #8b4513, #d4af37);
            color: white;
        }

        .auto-submit-btn.primary:hover {
            background: linear-gradient(135deg, #d4af37, #ffd700);
            transform: translateY(-2px);
        }

        .auto-submit-btn.secondary {
            background: #f0f0f0;
            color: #333;
            border: 2px solid #d4af37;
        }

        .auto-submit-btn.secondary:hover {
            background: rgba(212, 175, 55, 0.1);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                margin-left: 20px;
            }

            .slide-menu {
                width: 100%;
                transform: translateX(-100%);
            }

            .slide-menu.active {
                transform: translateX(0);
            }

            .menu-toggle {
                left: 30px;
            }

            .hero-title {
                font-size: 2rem;
            }

            .main-content {
                padding: 1rem;
            }

            .content-section {
                padding: 1.5rem;
            }

            .speakers-container {
                grid-template-columns: 1fr;
            }

            .play-btn {
                width: 90%;
                font-size: 1rem;
                padding: 0.8rem 1.5rem;
            }
        }

        /* Smooth Scrolling */
        html {
            scroll-behavior: smooth;
        }

        /* Selection Styles */
        ::selection {
            background: rgba(212, 175, 55, 0.3);
            color: #8b4513;
        }
    </style>
</head>
<body>
    <div class="header-spacer"></div>

    <!-- Guruvammal Logo as Back Button -->
    <div class="gk-logo-container" onclick="handleBackButton()">
        <div class="master-guruvammal-logo">
            Ga<span class="musical-corner">♪</span>
        </div>
        <div class="back-label">Back</div>
    </div>

    <!-- Professional Slide-out Menu -->
    <div class="slide-menu" id="slideMenu">
        <div class="menu-header">
            <div class="menu-title">🎓 IELTS General Listening</div>
            <div class="menu-subtitle">Part 3 - Practice 6</div>
        </div>
        <div class="menu-content">
            <a href="#speakers" class="menu-item" onclick="navigateToSection('speakers')">
                <div class="item-title">1. Training Team</div>
                <div class="item-description">👥 HR Manager, Team Leader, Employee & Coordinator</div>
            </a>
            <a href="#audio-section" class="menu-item" onclick="navigateToSection('audio-section')">
                <div class="item-title">2. Training Planning</div>
                <div class="item-description">🎧 Course Selection Discussion (5 min)</div>
            </a>
            <a href="#questions" class="menu-item" onclick="navigateToSection('questions')">
                <div class="item-title">3. Questions (Part 3)</div>
                <div class="item-description">📝 Matching Questions + Sentence Completion</div>
            </a>
            <a href="#results" class="menu-item" onclick="navigateToSection('results')">
                <div class="item-title">4. Results & Analysis</div>
                <div class="item-description">📊 Performance Feedback & Improvement Tips</div>
            </a>
        </div>
    </div>

    <!-- Menu Toggle Button -->
    <div class="menu-toggle" id="menuToggle" onclick="toggleMenu()">
        <span id="menuIcon">📋</span>
    </div>

    <!-- Main Container -->
    <div class="container" id="container">
        <main class="main-content">
            <!-- Hero Section -->
            <section class="hero-section">
                <h1 class="hero-title">🎓 IELTS General Listening - Part 3 (Practice 6)</h1>
                <div class="hero-subtitle">
                    Educational Planning - Training Course Selection
                </div>
                <p class="hero-description">
                    Listen to Mark Davis (HR Manager), Karen Wilson (Team Leader), Paul Chen (Employee), and Sarah Johnson (Training Coordinator) discussing professional development training options. This conversation covers skills development, course scheduling, certification requirements, and career advancement. Complete matching questions and sentence completion about their training planning session. This practice covers Questions 21-30.
                </p>
            </section>

            <section id="speakers" class="content-section">
                <h2 class="section-title">👥 Training Planning Participants</h2>
                <div class="speakers-container">
                    <div class="speaker-card" id="speaker1">
                        <div class="speaker-name">Mark Davis</div>
                        <div class="speaker-role">HR Manager | Professional Development</div>
                        <div class="speaker-details">
                            <strong>Accent:</strong> American English<br>
                            <strong>Role:</strong> Human Resources training coordinator<br>
                            <strong>Experience:</strong> 8 years in employee development<br>
                            <strong>Responsibility:</strong> Managing training budgets and policy compliance
                        </div>
                    </div>
                    <div class="speaker-card" id="speaker2">
                        <div class="speaker-name">Karen Wilson</div>
                        <div class="speaker-role">Team Leader | Skills Development</div>
                        <div class="speaker-details">
                            <strong>Accent:</strong> British English<br>
                            <strong>Role:</strong> Senior team leader with training oversight<br>
                            <strong>Background:</strong> Technical expertise and team management<br>
                            <strong>Responsibility:</strong> Identifying skill gaps and training needs
                        </div>
                    </div>
                    <div class="speaker-card" id="speaker3">
                        <div class="speaker-name">Paul Chen</div>
                        <div class="speaker-role">Employee | Career Development</div>
                        <div class="speaker-details">
                            <strong>Accent:</strong> Australian English<br>
                            <strong>Role:</strong> Mid-level employee seeking advancement<br>
                            <strong>Experience:</strong> 3 years with current company<br>
                            <strong>Responsibility:</strong> Requesting training for career progression
                        </div>
                    </div>
                    <div class="speaker-card" id="speaker4">
                        <div class="speaker-name">Sarah Johnson</div>
                        <div class="speaker-role">Training Coordinator | Certification</div>
                        <div class="speaker-details">
                            <strong>Accent:</strong> American English<br>
                            <strong>Role:</strong> External training provider coordinator<br>
                            <strong>Experience:</strong> Specialized in professional certifications<br>
                            <strong>Responsibility:</strong> Course logistics and certification requirements
                        </div>
                    </div>
                </div>
            </section>

            <section id="audio-section" class="content-section">
                <h2 class="section-title">🎧 Training Planning Discussion</h2>
                <div class="conversation-context">
                    <strong>Educational Context:</strong> Professional development meeting discussing training course selection, skills development opportunities, certification requirements, and career advancement pathways. The conversation involves evaluating training options that align with both employee aspirations and company objectives.
                </div>
                
                <button class="play-btn" onclick="playAudio()" id="playBtn">
                    ▶️ Play
                </button>
                
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="time-display">
                        <span id="currentTime">00:00</span> / <span id="totalTime">05:30</span>
                    </div>
                </div>
                
                <div id="currentSpeaker" style="text-align: center; margin-top: 15px; font-weight: bold; color: #8b4513;"></div>
            </section>

            <section id="questions" class="content-section">
                <h2 class="section-title">📝 Training Planning Assessment</h2>
                
                <!-- Matching Questions (Questions 21-24) -->
                <div class="question-group">
                    <h3 class="question-group-title">Questions 21-24: Matching Questions</h3>
                    <p><em>Match each training course with its certification level. Choose the correct letter A-G.</em></p>
                    
                    <div class="matching-container">
                        <div class="matching-title">Training Courses and Certification Levels</div>
                        
                        <div class="matching-question">
                            <strong>Question 21: Project Management Fundamentals</strong>
                            <select class="matching-select" id="q21">
                                <option value="">Select...</option>
                                <option value="A">A</option>
                                <option value="B">B</option>
                                <option value="C">C</option>
                                <option value="D">D</option>
                                <option value="E">E</option>
                                <option value="F">F</option>
                                <option value="G">G</option>
                            </select>
                        </div>
                        
                        <div class="matching-question">
                            <strong>Question 22: Advanced Data Analysis</strong>
                            <select class="matching-select" id="q22">
                                <option value="">Select...</option>
                                <option value="A">A</option>
                                <option value="B">B</option>
                                <option value="C">C</option>
                                <option value="D">D</option>
                                <option value="E">E</option>
                                <option value="F">F</option>
                                <option value="G">G</option>
                            </select>
                        </div>
                        
                        <div class="matching-question">
                            <strong>Question 23: Digital Marketing Strategy</strong>
                            <select class="matching-select" id="q23">
                                <option value="">Select...</option>
                                <option value="A">A</option>
                                <option value="B">B</option>
                                <option value="C">C</option>
                                <option value="D">D</option>
                                <option value="E">E</option>
                                <option value="F">F</option>
                                <option value="G">G</option>
                            </select>
                        </div>
                        
                        <div class="matching-question">
                            <strong>Question 24: Leadership Development Program</strong>
                            <select class="matching-select" id="q24">
                                <option value="">Select...</option>
                                <option value="A">A</option>
                                <option value="B">B</option>
                                <option value="C">C</option>
                                <option value="D">D</option>
                                <option value="E">E</option>
                                <option value="F">F</option>
                                <option value="G">G</option>
                            </select>
                        </div>
                        
                        <div class="options-list">
                            <h4>Certification Levels:</h4>
                            <ul>
                                <li data-letter="A">Entry Level Certificate (3 months)</li>
                                <li data-letter="B">Intermediate Diploma (6 months)</li>
                                <li data-letter="C">Advanced Professional Certificate (9 months)</li>
                                <li data-letter="D">Expert Certification (12 months)</li>
                                <li data-letter="E">Continuing Education Credits (4 weeks)</li>
                                <li data-letter="F">Industry Standard Certification (8 months)</li>
                                <li data-letter="G">Master Class Series (2 months)</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Sentence Completion Questions (Questions 25-30) -->
                <div class="question-group">
                    <h3 class="question-group-title">Questions 25-30: Sentence Completion</h3>
                    <p><em>Complete the sentences below using NO MORE THAN TWO WORDS for each answer.</em></p>
                    
                    <div class="question">
                        <div class="question-number">Question 25</div>
                        <div class="question-text">
                            The training budget allows for up to 
                            <input type="text" class="sentence-completion-input" id="q25" placeholder="25"> 
                            employees to attend external courses this quarter.
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-number">Question 26</div>
                        <div class="question-text">
                            All training requests must be submitted with a 
                            <input type="text" class="sentence-completion-input" id="q26" placeholder="26"> 
                            explaining how the course supports career goals.
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-number">Question 27</div>
                        <div class="question-text">
                            The company will provide 
                            <input type="text" class="sentence-completion-input" id="q27" placeholder="27"> 
                            for employees attending courses during work hours.
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-number">Question 28</div>
                        <div class="question-text">
                            Priority will be given to courses that offer 
                            <input type="text" class="sentence-completion-input" id="q28" placeholder="28"> 
                            recognized by the industry.
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-number">Question 29</div>
                        <div class="question-text">
                            Employees must complete a 
                            <input type="text" class="sentence-completion-input" id="q29" placeholder="29"> 
                            within 30 days of finishing their training course.
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-number">Question 30</div>
                        <div class="question-text">
                            The next training planning meeting is scheduled for 
                            <input type="text" class="sentence-completion-input" id="q30" placeholder="30"> 
                            to review progress and approve new requests.
                        </div>
                    </div>
                </div>

                <button class="submit-btn" onclick="submitAnswers()">Submit Answers</button>
            </section>

            <section id="results" class="content-section" style="display: none;">
                <h2 class="section-title">📊 Results & Performance Analysis</h2>
                
                <div class="score-display">
                    <div class="score-number" id="scoreNumber">0</div>
                    <div class="score-text">out of 10 questions correct</div>
                </div>

                <div class="answer-review" id="answerReview">
                    <!-- Answer review will be populated by JavaScript -->
                </div>

                <div class="improvement-tips">
                    <h4>🎓 General Part 3 Improvement Tips</h4>
                    <ul id="improvementList">
                        <!-- Tips will be populated by JavaScript -->
                    </ul>
                </div>
            </section>
        </main>
    </div>

    <!-- Auto-submit Timer Popup -->
    <div class="auto-submit-overlay" id="autoSubmitOverlay">
        <div class="auto-submit-popup">
            <div class="auto-submit-title">⏰ Time Completed!</div>
            <div class="auto-submit-message">
                The listening time has finished. You should submit your answers now as this simulates the real IELTS test conditions.
            </div>
            <div class="auto-submit-countdown" id="autoSubmitCountdown">10</div>
            <div class="auto-submit-buttons">
                <button class="auto-submit-btn primary" onclick="handleAutoSubmit()">Submit Now</button>
                <button class="auto-submit-btn secondary" onclick="continueWithoutSubmit()">Continue Working</button>
            </div>
        </div>
    </div>

    <script>
        // Training planning conversation data with enhanced TTS integration
        const conversationData = [
            {
                speaker: "Mark Davis",
                text: "Good morning everyone. Thanks for joining this training planning session. I'm Mark from HR, and I've called this meeting to discuss our quarterly professional development opportunities. We have Paul here who's submitted a training request, Karen as his team leader, and Sarah from our external training provider.",
                duration: 17000
            },
            {
                speaker: "Paul Chen",
                text: "Hi Mark, thanks for organizing this. I'm really interested in advancing my skills, particularly in project management and data analysis. I believe additional training would help me contribute more effectively to our team and prepare for future career opportunities.",
                duration: 14000
            },
            {
                speaker: "Karen Wilson",
                text: "I fully support Paul's request. From a team perspective, we've identified some skill gaps that these courses could address. Paul has shown great potential, and I think targeted training would benefit both him and our department's objectives.",
                duration: 12000
            },
            {
                speaker: "Sarah Johnson",
                text: "Excellent! I've prepared a comprehensive overview of our available courses. Let me start with the different certification levels we offer. For Project Management Fundamentals, this is perfect for someone starting their PM journey - it's an Entry Level Certificate that takes 3 months to complete.",
                duration: 15000
            },
            {
                speaker: "Mark Davis",
                text: "That sounds appropriate for Paul's current level. What about data analysis? I know that's another area where Paul wants to develop his expertise.",
                duration: 8000
            },
            {
                speaker: "Sarah Johnson",
                text: "For Advanced Data Analysis, given Paul's technical background, I'd recommend the Advanced Professional Certificate. It's a more comprehensive 9-month program that covers statistical modeling, business intelligence, and advanced analytics tools.",
                duration: 13000
            },
            {
                speaker: "Paul Chen",
                text: "Those both sound great! I'm also curious about digital marketing. Our team occasionally works on marketing projects, and I think those skills would be valuable.",
                duration: 10000
            },
            {
                speaker: "Sarah Johnson",
                text: "Digital Marketing Strategy would be perfect for that. It's a Master Class Series - a focused 2-month intensive program that covers all the latest digital marketing techniques and tools.",
                duration: 11000
            },
            {
                speaker: "Karen Wilson",
                text: "Mark, what about leadership development? I think Paul should also consider that for his long-term career growth, especially if he's looking at supervisory roles in the future.",
                duration: 10000
            },
            {
                speaker: "Sarah Johnson",
                text: "The Leadership Development Program is excellent for that. It's an Intermediate Diploma - a 6-month comprehensive program covering team management, strategic thinking, and executive communication skills.",
                duration: 12000
            },
            {
                speaker: "Mark Davis",
                text: "Now, let me explain our budget constraints. This quarter, our training budget allows for up to twelve employees to attend external courses. So we have good capacity for Paul and others.",
                duration: 11000
            },
            {
                speaker: "Karen Wilson",
                text: "That's great to hear. Paul, you'll need to submit your formal request with a personal statement explaining how each course supports your career goals. HR requires this for all training applications.",
                duration: 11000
            },
            {
                speaker: "Mark Davis",
                text: "Exactly. And I should mention that the company will provide paid leave for employees attending courses during work hours. We want to ensure that training doesn't create additional stress or financial pressure.",
                duration: 12000
            },
            {
                speaker: "Sarah Johnson",
                text: "That's wonderful support! I should also mention that priority will be given to courses that offer industry certification recognized by professional bodies. All our programs meet these standards and provide valuable credentials.",
                duration: 13000
            },
            {
                speaker: "Paul Chen",
                text: "This all sounds fantastic. What happens after I complete the training? Are there any follow-up requirements?",
                duration: 7000
            },
            {
                speaker: "Mark Davis",
                text: "Yes, employees must complete a training report within 30 days of finishing their course. This helps us evaluate the effectiveness of our training investments and share knowledge across the organization.",
                duration: 12000
            },
            {
                speaker: "Karen Wilson",
                text: "And don't forget, we have regular review sessions. Mark, when is our next training planning meeting scheduled?",
                duration: 7000
            },
            {
                speaker: "Mark Davis",
                text: "The next training planning meeting is scheduled for next Friday to review progress on current enrollments and approve new requests. It's part of our continuous improvement process.",
                duration: 11000
            },
            {
                speaker: "pause",
                text: "",
                duration: 3000
            }
        ];

        // Audio control variables
        let currentIndex = 0;
        let isPlaying = false;
        let speechSynthesis = window.speechSynthesis;
        let currentUtterance = null;
        // Optimized audio timing for 5-minute content with natural flow
        let totalDuration = conversationData.reduce((sum, item) => sum + item.duration, 0) + 120000; // Add 2 minutes for pauses and natural flow (5:30 total)
        let currentTime = 0;
        let audioInterval;
        let autoSubmitInterval;
        let autoSubmitCountdown = 10;

        // Voice configuration for different speakers
        const voiceConfig = {
            "Mark Davis": {
                rate: 0.85,
                pitch: 0.9,
                volume: 0.9,
                lang: 'en-US'
            },
            "Karen Wilson": {
                rate: 0.8,
                pitch: 1.0,
                volume: 0.9,
                lang: 'en-GB'
            },
            "Paul Chen": {
                rate: 0.9,
                pitch: 0.95,
                volume: 0.9,
                lang: 'en-AU'
            },
            "Sarah Johnson": {
                rate: 0.85,
                pitch: 1.05,
                volume: 0.9,
                lang: 'en-US'
            }
        };

        function highlightCurrentSpeaker(speakerName) {
            // Reset all speaker cards
            document.querySelectorAll('.speaker-card').forEach(card => {
                card.classList.remove('active');
            });
            
            // Handle pause or end of conversation
            if (speakerName === "pause" || !speakerName) {
                document.getElementById('currentSpeaker').textContent = '⏸️ Training discussion pausing...';
                return;
            }
            
            // Highlight current speaker
            if (speakerName === "Mark Davis") {
                document.getElementById('speaker1').classList.add('active');
                document.getElementById('currentSpeaker').textContent = `🗣️ Currently speaking: Mark (HR Manager)`;
            } else if (speakerName === "Karen Wilson") {
                document.getElementById('speaker2').classList.add('active');
                document.getElementById('currentSpeaker').textContent = `🗣️ Currently speaking: Karen (Team Leader)`;
            } else if (speakerName === "Paul Chen") {
                document.getElementById('speaker3').classList.add('active');
                document.getElementById('currentSpeaker').textContent = `🗣️ Currently speaking: Paul (Employee)`;
            } else if (speakerName === "Sarah Johnson") {
                document.getElementById('speaker4').classList.add('active');
                document.getElementById('currentSpeaker').textContent = `🗣️ Currently speaking: Sarah (Training Coordinator)`;
            }
        }

        function updateProgress() {
            if (isPlaying) {
                currentTime += 100;
                const progress = Math.min((currentTime / totalDuration) * 100, 100);
                document.getElementById('progressFill').style.width = progress + '%';
                
                // Update time display
                const currentMinutes = Math.floor(currentTime / 60000);
                const currentSeconds = Math.floor((currentTime % 60000) / 1000);
                document.getElementById('currentTime').textContent = 
                    `${currentMinutes.toString().padStart(2, '0')}:${currentSeconds.toString().padStart(2, '0')}`;
                
                // Check if time is completed (when progress reaches 100%)
                if (currentTime >= totalDuration) {
                    console.log('⏰ Timer completed - showing auto-submit popup');
                    showAutoSubmitPopup();
                }
            }
        }

        function formatTime(milliseconds) {
            const minutes = Math.floor(milliseconds / 60000);
            const seconds = Math.floor((milliseconds % 60000) / 1000);
            return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function playAudio() {
            if (currentIndex >= conversationData.length) {
                currentIndex = 0;
                currentTime = 0;
            }
            
            isPlaying = true;
            document.getElementById('playBtn').disabled = true;
            document.getElementById('playBtn').textContent = '🔊 Playing...';
            
            audioInterval = setInterval(updateProgress, 100);
            playCurrentSegment();
        }

        function playCurrentSegment() {
            if (!isPlaying) {
                return;
            }
            
            if (currentIndex >= conversationData.length) {
                console.log('🎯 Reached end of conversation data');
                stopAudio();
                return;
            }

            const segment = conversationData[currentIndex];
            
            // Handle pause segments
            if (segment.speaker === "pause") {
                console.log(`⏸️ Playing pause segment ${currentIndex + 1} for ${segment.duration}ms`);
                highlightCurrentSpeaker("pause");
                currentIndex++;
                setTimeout(() => {
                    if (isPlaying) {
                        if (currentIndex < conversationData.length) {
                            playCurrentSegment();
                        } else {
                            console.log('🎯 All conversation segments completed after pause');
                            stopAudio();
                        }
                    }
                }, segment.duration);
                return;
            }

            highlightCurrentSpeaker(segment.speaker);

            // Create speech utterance
            currentUtterance = new SpeechSynthesisUtterance(segment.text);
            
            // Apply voice configuration
            const config = voiceConfig[segment.speaker];
            if (config) {
                currentUtterance.rate = config.rate;
                currentUtterance.pitch = config.pitch;
                currentUtterance.volume = config.volume;
                currentUtterance.lang = config.lang;
            }

            // Set voice based on language and speaker
            const voices = speechSynthesis.getVoices();
            if (segment.speaker === "Mark Davis") {
                const americanVoice = voices.find(voice => 
                    voice.lang.includes('en-US') && voice.name.toLowerCase().includes('male')
                ) || voices.find(voice => voice.lang.includes('en-US'));
                if (americanVoice) currentUtterance.voice = americanVoice;
            } else if (segment.speaker === "Karen Wilson") {
                const britishVoice = voices.find(voice => 
                    voice.lang.includes('en-GB') && voice.name.toLowerCase().includes('female')
                ) || voices.find(voice => voice.lang.includes('en-GB'));
                if (britishVoice) currentUtterance.voice = britishVoice;
            } else if (segment.speaker === "Paul Chen") {
                const australianVoice = voices.find(voice => 
                    voice.lang.includes('en-AU') && voice.name.toLowerCase().includes('male')
                ) || voices.find(voice => voice.lang.includes('en-AU'));
                if (australianVoice) currentUtterance.voice = australianVoice;
            } else if (segment.speaker === "Sarah Johnson") {
                const americanVoice = voices.find(voice => 
                    voice.lang.includes('en-US') && voice.name.toLowerCase().includes('female')
                ) || voices.find(voice => voice.lang.includes('en-US'));
                if (americanVoice) currentUtterance.voice = americanVoice;
            }

            currentUtterance.onstart = () => {
                console.log(`🎤 Started segment ${currentIndex + 1}: ${segment.speaker}`);
            };

            currentUtterance.onend = () => {
                console.log(`✅ Completed segment ${currentIndex + 1}: ${segment.speaker}`);
                currentIndex++;
                // Add natural pause between speakers (2 seconds for training conversation)
                setTimeout(() => {
                    if (isPlaying) {
                        if (currentIndex < conversationData.length) {
                            playCurrentSegment();
                        } else {
                            console.log('🎯 All conversation segments completed');
                            stopAudio();
                        }
                    }
                }, 2000);
            };

            currentUtterance.onerror = (event) => {
                console.error(`❌ Error in segment ${currentIndex + 1}:`, event.error);
                // Continue to next segment on error
                currentIndex++;
                setTimeout(() => {
                    if (isPlaying && currentIndex < conversationData.length) {
                        playCurrentSegment();
                    } else {
                        stopAudio();
                    }
                }, 1000);
            };

            try {
                speechSynthesis.speak(currentUtterance);
            } catch (error) {
                console.error(`❌ Failed to start TTS for segment ${currentIndex + 1}:`, error);
                // Continue to next segment
                currentIndex++;
                setTimeout(() => {
                    if (isPlaying && currentIndex < conversationData.length) {
                        playCurrentSegment();
                    } else {
                        stopAudio();
                    }
                }, 1000);
            }
        }

        function stopAudio() {
            isPlaying = false;
            speechSynthesis.cancel();
            clearInterval(audioInterval);
            
            // Show completion message if audio played to the end
            if (currentIndex >= conversationData.length) {
                document.getElementById('currentSpeaker').textContent = '✅ Training discussion completed. You may now answer the questions.';
                setTimeout(() => {
                    document.getElementById('currentSpeaker').textContent = '';
                }, 3000);
            } else {
                document.getElementById('currentSpeaker').textContent = '';
            }
            
            currentIndex = 0;
            currentTime = 0;
            
            document.getElementById('progressFill').style.width = '0%';
            document.getElementById('currentTime').textContent = '00:00';
            document.querySelectorAll('.speaker-card').forEach(card => {
                card.classList.remove('active');
            });
            
            document.getElementById('playBtn').disabled = false;
            document.getElementById('playBtn').textContent = '▶️ Play';
        }

        // Correct answers for assessment
        const correctAnswers = {
            q21: 'A', // Project Management Fundamentals → Entry Level Certificate (3 months)
            q22: 'C', // Advanced Data Analysis → Advanced Professional Certificate (9 months)
            q23: 'G', // Digital Marketing Strategy → Master Class Series (2 months)
            q24: 'B', // Leadership Development Program → Intermediate Diploma (6 months)
            q25: 'twelve', // training budget allows for up to twelve employees
            q26: 'personal statement', // must be submitted with a personal statement
            q27: 'paid leave', // company will provide paid leave
            q28: 'industry certification', // priority given to courses that offer industry certification
            q29: 'training report', // must complete a training report
            q30: 'next friday' // next training planning meeting is scheduled for next Friday
        };

        // Question explanations
        const explanations = {
            q21: 'Sarah explains: "For Project Management Fundamentals, this is perfect for someone starting their PM journey - it\'s an Entry Level Certificate that takes 3 months to complete."',
            q22: 'Sarah states: "For Advanced Data Analysis, given Paul\'s technical background, I\'d recommend the Advanced Professional Certificate. It\'s a more comprehensive 9-month program."',
            q23: 'Sarah mentions: "Digital Marketing Strategy would be perfect for that. It\'s a Master Class Series - a focused 2-month intensive program."',
            q24: 'Sarah explains: "The Leadership Development Program is excellent for that. It\'s an Intermediate Diploma - a 6-month comprehensive program."',
            q25: 'Mark states: "This quarter, our training budget allows for up to twelve employees to attend external courses."',
            q26: 'Karen explains: "You\'ll need to submit your formal request with a personal statement explaining how each course supports your career goals."',
            q27: 'Mark mentions: "The company will provide paid leave for employees attending courses during work hours."',
            q28: 'Sarah states: "Priority will be given to courses that offer industry certification recognized by professional bodies."',
            q29: 'Mark explains: "Employees must complete a training report within 30 days of finishing their course."',
            q30: 'Mark states: "The next training planning meeting is scheduled for next Friday to review progress and approve new requests."'
        };

        function submitAnswers() {
            let score = 0;
            const answers = {};
            const reviewHTML = [];
            
            // Check matching questions (21-24)
            for (let i = 21; i <= 24; i++) {
                const questionName = `q${i}`;
                const selectElement = document.getElementById(questionName);
                const answer = selectElement ? selectElement.value : '';
                answers[questionName] = answer;
                
                const correct = correctAnswers[questionName];
                const isCorrect = answer === correct;
                if (isCorrect) score++;
                
                reviewHTML.push(`
                    <div class="review-item ${isCorrect ? 'correct' : 'incorrect'}">
                        <strong>Question ${i}:</strong> ${isCorrect ? '✅' : '❌'}<br>
                        <strong>Your answer:</strong> ${answer || '<em>No answer</em>'}<br>
                        <strong>Correct answer:</strong> ${correctAnswers[questionName]}<br>
                        <strong>Explanation:</strong> ${explanations[questionName]}
                    </div>
                `);
            }

            // Check sentence completion questions (25-30)
            for (let i = 25; i <= 30; i++) {
                const questionName = `q${i}`;
                const answer = document.getElementById(questionName).value.trim().toLowerCase();
                answers[questionName] = answer;
                
                const correct = correctAnswers[questionName].toLowerCase();
                const isCorrect = answer === correct || 
                    (correct.includes(' ') && correct.split(' ').some(word => answer.includes(word))) ||
                    answer.includes(correct.split(' ')[0]);
                if (isCorrect) score++;
                
                reviewHTML.push(`
                    <div class="review-item ${isCorrect ? 'correct' : 'incorrect'}">
                        <strong>Question ${i}:</strong> ${isCorrect ? '✅' : '❌'}<br>
                        <strong>Your answer:</strong> ${answer || '<em>No answer</em>'}<br>
                        <strong>Correct answer:</strong> ${correctAnswers[questionName]}<br>
                        <strong>Explanation:</strong> ${explanations[questionName]}
                    </div>
                `);
            }
            
            // Update score display
            document.getElementById('scoreNumber').textContent = score;
            document.getElementById('answerReview').innerHTML = reviewHTML.join('');
            
            // Generate improvement tips
            const tips = generateImprovementTips(score);
            const tipsHTML = tips.map(tip => `<li>${tip}</li>`).join('');
            document.getElementById('improvementList').innerHTML = tipsHTML;
            
            // Show results section
            document.getElementById('results').style.display = 'block';
            document.getElementById('results').scrollIntoView({ 
                behavior: 'smooth', 
                block: 'start' 
            });
        }

        function generateImprovementTips(score) {
            const tips = [];
            
            if (score <= 3) {
                tips.push("Focus on listening for professional development and training vocabulary");
                tips.push("Practice understanding workplace conversations about skills and courses");
                tips.push("Work on following multi-speaker discussions about career planning");
                tips.push("Listen to educational and training-related conversations more frequently");
            } else if (score <= 6) {
                tips.push("Develop better matching skills with course types and certification levels");
                tips.push("Practice identifying specific training requirements and procedures");
                tips.push("Work on understanding formal workplace training policies");
                tips.push("Focus on vocabulary related to professional development and certifications");
            } else if (score <= 8) {
                tips.push("Fine-tune your ability to distinguish between different training roles and responsibilities");
                tips.push("Practice capturing exact details about course duration and requirements");
                tips.push("Work on understanding workplace training planning and budget discussions");
                tips.push("Review vocabulary related to HR policies, training coordination, and career development");
            } else {
                tips.push("Excellent work! Continue practicing with authentic IELTS General Part 3 materials");
                tips.push("Focus on time management to complete both matching and sentence completion efficiently");
                tips.push("Practice with different workplace and educational planning contexts");
                tips.push("Consider helping others to reinforce your own professional training listening skills");
            }
            
            return tips;
        }

        // Auto-submit timer functions
        function showAutoSubmitPopup() {
            // Stop audio and clear intervals
            isPlaying = false;
            speechSynthesis.cancel();
            clearInterval(audioInterval);
            
            // Show the popup
            document.getElementById('autoSubmitOverlay').style.display = 'flex';
            
            // Reset countdown
            autoSubmitCountdown = 10;
            document.getElementById('autoSubmitCountdown').textContent = autoSubmitCountdown;
            
            // Start countdown
            autoSubmitInterval = setInterval(() => {
                autoSubmitCountdown--;
                document.getElementById('autoSubmitCountdown').textContent = autoSubmitCountdown;
                
                if (autoSubmitCountdown <= 0) {
                    clearInterval(autoSubmitInterval);
                    handleAutoSubmit();
                }
            }, 1000);
        }

        function handleAutoSubmit() {
            clearInterval(autoSubmitInterval);
            document.getElementById('autoSubmitOverlay').style.display = 'none';
            
            // Automatically submit answers
            submitAnswers();
            
            // Show message
            setTimeout(() => {
                alert('⏰ Time completed! Your answers have been automatically submitted as per IELTS test conditions.');
            }, 500);
        }

        function continueWithoutSubmit() {
            clearInterval(autoSubmitInterval);
            document.getElementById('autoSubmitOverlay').style.display = 'none';
            
            // Allow user to continue working
            console.log('📝 User chose to continue working after timer completion');
        }

        // Navigation and menu functions
        function handleBackButton() {
            console.log('🔄 Back button clicked from IELTS General Listening Part 3 Practice 6 - Going to introduction');
            window.location.href = 'IELTS_General_Listening_Introduction.html';
        }

        function toggleMenu() {
            const menu = document.getElementById('slideMenu');
            const container = document.getElementById('container');
            const menuToggle = document.getElementById('menuToggle');
            
            menu.classList.toggle('collapsed');
            container.classList.toggle('menu-collapsed');
            menuToggle.classList.toggle('collapsed');
        }

        function navigateToSection(sectionId) {
            document.getElementById(sectionId).scrollIntoView({ 
                behavior: 'smooth', 
                block: 'start' 
            });
            
            // Auto-collapse menu on mobile
            if (window.innerWidth <= 768) {
                toggleMenu();
            }
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                handleBackButton();
            } else if (event.code === 'Space' && !isPlaying) {
                event.preventDefault();
                playAudio();
            } else if (event.ctrlKey && event.key === 'Tab') {
                event.preventDefault();
                toggleMenu();
            }
        });

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🎓 IELTS General Listening Part 3 Practice 6 - Training Planning loaded');
            
            // Debug audio system
            console.log('🔊 Browser audio capabilities:');
            console.log('- speechSynthesis available:', 'speechSynthesis' in window);
            console.log('- Web Audio API available:', 'AudioContext' in window || 'webkitAudioContext' in window);
            
            // Test speech synthesis availability
            if ('speechSynthesis' in window) {
                setTimeout(() => {
                    const voices = speechSynthesis.getVoices();
                    console.log('🎤 Initial voices check:', voices.length, 'voices available');
                    if (voices.length === 0) {
                        console.log('⏳ Waiting for voices to load...');
                        speechSynthesis.addEventListener('voiceschanged', function() {
                            const newVoices = speechSynthesis.getVoices();
                            console.log('🎤 Voices loaded:', newVoices.length, 'voices now available');
                        });
                    }
                }, 1000);
            }
            
            // Set total time display
            document.getElementById('totalTime').textContent = formatTime(totalDuration);
        });

        // Clean up on page unload
        window.addEventListener('beforeunload', function() {
            if ('speechSynthesis' in window) {
                speechSynthesis.cancel();
            }
            if (audioInterval) {
                clearInterval(audioInterval);
            }
            if (autoSubmitInterval) {
                clearInterval(autoSubmitInterval);
            }
        });
    </script>
</body>
</html> 