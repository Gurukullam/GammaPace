<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IELTS General Listening Part 2 - Practice 7 | GK Foundation</title>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.3) 0%, rgba(139, 69, 19, 0.2) 50%, rgba(255, 215, 0, 0.1) 100%);
            min-height: 100vh;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 20%, rgba(255, 215, 0, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(212, 175, 55, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 60%, rgba(139, 69, 19, 0.05) 0%, transparent 50%);
            z-index: -1;
            pointer-events: none;
        }

        /* Header spacing */
        .header-spacer {
            height: 20px;
            width: 100%;
        }

        /* Guruvammal Logo as Back Button */
        .gk-logo-container {
            position: fixed;
            top: 30px;
            right: 30px;
            z-index: 1002;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.3rem;
            cursor: pointer;
            padding: 5px;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .gk-logo-container:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(139, 69, 19, 0.3);
        }

        .master-guruvammal-logo {
            position: relative;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
            box-sizing: border-box;
            font-family: 'Century Gothic', sans-serif;
            font-size: 26px;
            font-weight: 900;
            letter-spacing: -1px;
            line-height: 1;
            color: #5d3a0a;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.3);
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(139, 69, 19, 0.25) 50%, rgba(205, 133, 63, 0.2) 100%);
            backdrop-filter: blur(10px);
            border-radius: 6px;
            padding: 10px;
            box-shadow: 0 8px 25px rgba(139, 69, 19, 0.3), 0 0 40px rgba(212, 175, 55, 0.2);
            z-index: 10000;
            transition: all 0.3s ease;
        }

        .master-guruvammal-logo .musical-corner {
            position: absolute;
            top: 3px;
            right: 4px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: transparent;
            border: 1px solid #5d3a0a;
            color: #5d3a0a;
            font-family: 'Century Gothic', sans-serif;
            font-size: 7px;
            font-weight: 900;
            display: flex;
            align-items: center;
            justify-content: center;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.3);
            box-shadow: none;
        }

        .master-guruvammal-logo:hover {
            transform: scale(1.1);
            box-shadow: 0 10px 30px rgba(139, 69, 19, 0.4), 0 0 50px rgba(212, 175, 55, 0.3);
        }

        .back-label {
            font-size: 0.75rem;
            font-weight: 600;
            color: #8b4513;
            font-family: 'Century Gothic', sans-serif;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.8);
            text-align: center;
            transition: all 0.3s ease;
        }

        .gk-logo-container:hover .back-label {
            color: #5d3a0a;
            transform: translateY(-1px);
        }

        /* Container with menu support */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            margin-left: 360px;
            transition: margin-left 0.3s ease;
        }

        .container.menu-collapsed {
            margin-left: 20px;
        }

        /* Main Content */
        .main-content {
            margin-top: 0;
            padding: 1.5rem 2rem;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Professional Slide-out Menu */
        .slide-menu {
            position: fixed;
            left: 0;
            top: 0;
            width: 340px;
            height: 100vh;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(248, 249, 250, 0.95) 100%);
            backdrop-filter: blur(20px);
            border-right: 3px solid rgba(212, 175, 55, 0.3);
            box-shadow: 8px 0 30px rgba(139, 69, 19, 0.15);
            z-index: 1000;
            overflow-y: auto;
            transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            transform: translateX(0);
        }

        .slide-menu.collapsed {
            transform: translateX(-340px);
        }

        .menu-header {
            background: linear-gradient(135deg, #8b4513 0%, #a0522d 100%);
            color: white;
            padding: 2rem 1.5rem 1.5rem;
            border-bottom: 2px solid rgba(212, 175, 55, 0.3);
            position: relative;
            overflow: hidden;
        }

        .menu-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 20%, rgba(255, 215, 0, 0.1) 0%, transparent 40%),
                radial-gradient(circle at 80% 80%, rgba(212, 175, 55, 0.15) 0%, transparent 40%);
            pointer-events: none;
        }

        .menu-title {
            font-size: 1.4rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            position: relative;
            z-index: 1;
        }

        .menu-subtitle {
            font-size: 0.9rem;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        .menu-content {
            padding: 1.5rem 0;
        }

        .menu-item {
            display: block;
            padding: 1rem 1.5rem;
            text-decoration: none;
            color: #333;
            border-bottom: 1px solid rgba(212, 175, 55, 0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .menu-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(135deg, #d4af37, #b8860b);
            transform: scaleY(0);
            transition: transform 0.3s ease;
        }

        .menu-item:hover {
            background: rgba(212, 175, 55, 0.08);
            color: #8b4513;
            transform: translateX(8px);
        }

        .menu-item:hover::before {
            transform: scaleY(1);
        }

        .item-title {
            font-weight: 600;
            font-size: 1rem;
            margin-bottom: 0.2rem;
        }

        .item-description {
            font-size: 0.85rem;
            color: #666;
            line-height: 1.4;
        }

        /* Menu Toggle Button */
        .menu-toggle {
            position: fixed;
            top: 30px;
            left: 360px;
            background: linear-gradient(135deg, #8b4513, #a0522d);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.2rem;
            z-index: 1001;
            box-shadow: 0 4px 15px rgba(139, 69, 19, 0.3);
            transition: all 0.3s ease;
        }

        .menu-toggle:hover {
            background: linear-gradient(135deg, #a0522d, #8b4513);
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(139, 69, 19, 0.4);
        }

        .menu-toggle.collapsed {
            left: 30px;
        }

        /* Hero Section */
        .hero-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 3rem 2rem;
            text-align: center;
            margin-bottom: 3rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 30% 30%, rgba(212, 175, 55, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 70% 70%, rgba(139, 69, 19, 0.08) 0%, transparent 50%);
            pointer-events: none;
        }

        .hero-title {
            font-size: 2.8rem;
            font-weight: 900;
            color: #8b4513;
            margin-bottom: 1rem;
            position: relative;
            z-index: 1;
        }

        .hero-subtitle {
            font-size: 1.4rem;
            color: #666;
            margin-bottom: 1.5rem;
            position: relative;
            z-index: 1;
        }

        .hero-description {
            font-size: 1.1rem;
            color: #555;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.7;
            position: relative;
            z-index: 1;
        }

        /* Section Styles */
        .content-section {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 2.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            border-left: 5px solid #d4af37;
        }

        .section-title {
            color: #8b4513;
            font-size: 2rem;
            margin-bottom: 1.5rem;
            text-align: center;
            border-bottom: 3px solid #d4af37;
            padding-bottom: 0.5rem;
        }

        /* Audio Player Styles */
        .audio-player {
            text-align: center;
            margin: 2rem 0;
            padding: 2rem;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 15px;
            border: 2px solid #d4af37;
        }

        .play-btn {
            background: linear-gradient(135deg, #DAA520, #B8860B);
            color: white;
            border: none;
            padding: 1rem 2.5rem;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.2rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(218, 165, 32, 0.4);
            margin-bottom: 1rem;
        }

        .play-btn:hover:not(:disabled) {
            background: linear-gradient(135deg, #B8860B, #CD853F);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(218, 165, 32, 0.6);
        }

        .play-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .progress-container {
            background: rgba(139, 69, 19, 0.1);
            border-radius: 10px;
            padding: 0.5rem;
            margin-top: 1rem;
        }

        .progress-bar {
            background: #e0e0e0;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }

        .progress-fill {
            background: linear-gradient(90deg, #DAA520, #B8860B);
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
        }

        .time-display {
            color: #8b4513;
            font-weight: 600;
            font-size: 0.9rem;
        }

        /* Questions Styles */
        .questions-container {
            margin-top: 2rem;
        }

        .question-section {
            margin-bottom: 3rem;
        }

        .question-section h3 {
            color: #8b4513;
            margin-bottom: 1.5rem;
            font-size: 1.4rem;
            border-bottom: 2px solid #d4af37;
            padding-bottom: 0.5rem;
        }

        /* Table Completion Styles */
        .table-container {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            padding: 2rem;
            margin-bottom: 1.5rem;
            border: 2px solid #d4af37;
            overflow-x: auto;
        }

        .table-title {
            color: #8b4513;
            margin-bottom: 1.5rem;
            font-size: 1.3rem;
            text-align: center;
            border-bottom: 2px solid #d4af37;
            padding-bottom: 0.5rem;
        }

        .completion-table {
            width: 100%;
            border-collapse: collapse;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .completion-table th {
            background: linear-gradient(135deg, #8b4513, #a0522d);
            color: white;
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            border-bottom: 2px solid #d4af37;
        }

        .completion-table td {
            padding: 1rem;
            border-bottom: 1px solid rgba(212, 175, 55, 0.3);
            vertical-align: middle;
        }

        .completion-table tr:hover {
            background: rgba(212, 175, 55, 0.05);
        }

        .table-blank {
            border: 2px solid #d4af37;
            border-radius: 5px;
            padding: 0.5rem;
            font-size: 1rem;
            min-width: 100px;
            background: rgba(255, 255, 255, 0.9);
            text-align: center;
            font-weight: 600;
        }

        .table-blank:focus {
            outline: none;
            border-color: #8b4513;
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.3);
        }

        /* Form Completion Styles */
        .form-container {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 1.5rem;
            border: 2px solid #d4af37;
        }

        .form-title {
            color: #8b4513;
            margin-bottom: 1.5rem;
            font-size: 1.3rem;
            text-align: center;
            border-bottom: 2px solid #d4af37;
            padding-bottom: 0.5rem;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .form-field {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 8px;
            padding: 1.5rem;
            border-left: 4px solid #d4af37;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .form-field-label {
            font-weight: 600;
            color: #8b4513;
            font-size: 1rem;
        }

        .form-field-input {
            border: 2px solid #d4af37;
            border-radius: 5px;
            padding: 0.7rem;
            font-size: 1rem;
            background: rgba(255, 255, 255, 0.9);
            font-weight: 600;
        }

        .form-field-input:focus {
            outline: none;
            border-color: #8b4513;
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.3);
        }

        /* Submit Section */
        .submit-section {
            text-align: center;
            margin-top: 2rem;
        }

        .submit-btn {
            background: linear-gradient(135deg, #DAA520, #B8860B);
            color: white;
            border: none;
            padding: 1rem 3rem;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.2rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(218, 165, 32, 0.4);
        }

        .submit-btn:hover {
            background: linear-gradient(135deg, #B8860B, #CD853F);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(218, 165, 32, 0.6);
        }

        /* Results Section */
        .results-section {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 2.5rem;
            margin-top: 2rem;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            border-left: 5px solid #d4af37;
            display: none;
        }

        .score-display {
            text-align: center;
            margin-bottom: 2rem;
        }

        .score-number {
            font-size: 4rem;
            font-weight: bold;
            color: #8b4513;
            text-shadow: 2px 2px 4px rgba(139, 69, 19, 0.3);
        }

        .score-text {
            font-size: 1.2rem;
            color: #666;
            margin-top: 0.5rem;
        }

        .answer-review {
            margin-bottom: 2rem;
        }

        .review-item {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            border-left: 4px solid;
        }

        .review-item.correct {
            border-left-color: #28a745;
            background: rgba(40, 167, 69, 0.1);
        }

        .review-item.incorrect {
            border-left-color: #dc3545;
            background: rgba(220, 53, 69, 0.1);
        }

        .improvement-tips {
            background: rgba(212, 175, 55, 0.1);
            border-radius: 10px;
            padding: 1.5rem;
            border: 2px solid rgba(212, 175, 55, 0.3);
        }

        .improvement-tips h4 {
            color: #8b4513;
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .improvement-tips ul {
            list-style: none;
            padding: 0;
        }

        .improvement-tips li {
            margin-bottom: 0.8rem;
            padding-left: 1.5rem;
            position: relative;
        }

        .improvement-tips li::before {
            content: 'üí°';
            position: absolute;
            left: 0;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                margin-left: 20px;
            }

            .slide-menu {
                width: 100%;
                transform: translateX(-100%);
            }

            .slide-menu.active {
                transform: translateX(0);
            }

            .menu-toggle {
                left: 30px;
            }

            .hero-title {
                font-size: 2rem;
            }

            .main-content {
                padding: 1rem;
            }

            .content-section {
                padding: 1.5rem;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Smooth Scrolling */
        html {
            scroll-behavior: smooth;
        }

        /* Selection Styles */
        ::selection {
            background: rgba(212, 175, 55, 0.3);
            color: #8b4513;
        }
    </style>
</head>
<body>
    <div class="header-spacer"></div>

    <!-- Guruvammal Logo as Back Button -->
    <div class="gk-logo-container" onclick="handleBackButton()">
        <div class="master-guruvammal-logo">
                            Ga<span class="musical-corner">P</span>
        </div>
        <div class="back-label">Back</div>
    </div>

    <!-- Professional Slide-out Menu -->
    <div class="slide-menu" id="slideMenu">
        <div class="menu-header">
            <div class="menu-title">üèÉ IELTS General Listening</div>
            <div class="menu-subtitle">Part 2 - Practice 7</div>
        </div>
        <div class="menu-content">
            <a href="#instructions" class="menu-item" onclick="navigateToSection('instructions')">
                <div class="item-title">1. Instructions</div>
                <div class="item-description">‚ö†Ô∏è Test guidelines and preparation</div>
            </a>
            <a href="#audio-section" class="menu-item" onclick="navigateToSection('audio-section')">
                <div class="item-title">2. Audio Monologue</div>
                <div class="item-description">üéß Community Recreation Center (6.5 min)</div>
            </a>
            <a href="#questions" class="menu-item" onclick="navigateToSection('questions')">
                <div class="item-title">3. Questions (Part 2)</div>
                <div class="item-description">üìù Table + Form Completion</div>
            </a>
            <a href="#results" class="menu-item" onclick="navigateToSection('results')">
                <div class="item-title">4. Results & Analysis</div>
                <div class="item-description">üìä Your performance and tips</div>
            </a>
        </div>
    </div>

    <!-- Menu Toggle Button -->
    <div class="menu-toggle" id="menuToggle" onclick="toggleMenu()">
        <span id="menuIcon">üìã</span>
    </div>

    <!-- Main Container -->
    <div class="container" id="container">
        <main class="main-content">
            <!-- Hero Section -->
            <section class="hero-section">
                <h1 class="hero-title">üèÉ IELTS General Listening - Part 2 (Practice 7)</h1>
                <div class="hero-subtitle">
                    Community Recreation Center Information
                </div>
                <p class="hero-description">
                    Listen to a recreation center manager explaining facilities and membership options. Complete tables and forms with specific information. This practice simulates real test conditions with Questions 11-20.
                </p>
            </section>

            <!-- Instructions Section -->
            <section id="instructions" class="content-section">
                <h2 class="section-title">
                    ‚ö†Ô∏è Instructions
                </h2>
                <div style="background: rgba(255, 193, 7, 0.1); border-radius: 10px; padding: 1.5rem; border-left: 4px solid #ffc107;">
                    <h4 style="color: #8b4513; margin-bottom: 1rem;">üìã Before You Begin:</h4>
                    <ul style="color: #333; line-height: 1.8; list-style-position: inside;">
                        <li><strong>Questions 11-16:</strong> Complete the table using NO MORE THAN THREE WORDS AND/OR A NUMBER for each answer</li>
                        <li><strong>Questions 17-20:</strong> Complete the membership form using NO MORE THAN TWO WORDS for each answer</li>
                        <li><strong>Audio Duration:</strong> Approximately 6.5 minutes (one play only)</li>
                        <li><strong>Writing Time:</strong> You have additional time to transfer and check your answers</li>
                        <li><strong>Listen Carefully:</strong> Pay attention to facility details, schedules, and membership information</li>
                    </ul>
                    <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid rgba(212, 175, 55, 0.3);">
                        <button onclick="testAudio()" style="background: linear-gradient(135deg, #28a745, #20c997); color: white; border: none; padding: 0.5rem 1rem; border-radius: 15px; cursor: pointer; font-size: 0.9rem; margin-right: 1rem;">
                            üîä Test Audio System
                        </button>
                        <small style="color: #666;">Click to test if your browser supports audio playback</small>
                    </div>
                </div>
            </section>

            <!-- Audio Section -->
            <section id="audio-section" class="content-section">
                <h2 class="section-title">
                    üéß Audio Monologue
                </h2>
                
                <div class="audio-player">
                    <p style="color: #8b4513; font-weight: 600; margin-bottom: 1rem;">
                        üîä You will hear a recreation center manager explaining facilities, activities, and membership options.
                    </p>
                    
                    <button class="play-btn" onclick="playAudio()" id="playBtn">
                        ‚ñ∂Ô∏è Play Audio
                    </button>
                    
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                        <div class="time-display">
                            <span id="currentTime">00:00</span> / <span id="totalTime">06:30</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Questions Section -->
            <section id="questions" class="content-section">
                <h2 class="section-title">
                    üìù Questions 11-20
                </h2>
                
                <div class="questions-container">
                    <!-- Table Completion Questions 11-16 -->
                    <div class="question-section">
                        <h3>Questions 11-16</h3>
                        <p style="color: #666; margin-bottom: 1.5rem; font-style: italic;">
                            Complete the table below. Write NO MORE THAN THREE WORDS AND/OR A NUMBER for each answer.
                        </p>
                        
                        <div class="table-container">
                            <div class="table-title">Riverside Community Recreation Center - Facilities & Classes</div>
                            
                            <table class="completion-table">
                                <thead>
                                    <tr>
                                        <th>Activity/Facility</th>
                                        <th>Schedule</th>
                                        <th>Cost/Details</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Swimming Pool</strong></td>
                                        <td>Open <input type="text" class="table-blank" id="q11" placeholder="11"> days a week</td>
                                        <td>¬£4 per session</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Fitness Classes</strong></td>
                                        <td>Monday to Friday, <input type="text" class="table-blank" id="q12" placeholder="12"></td>
                                        <td>Included in membership</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Tennis Courts</strong></td>
                                        <td>Bookable in advance</td>
                                        <td>¬£<input type="text" class="table-blank" id="q13" placeholder="13"> per hour</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Children's Activities</strong></td>
                                        <td>Saturdays, <input type="text" class="table-blank" id="q14" placeholder="14"></td>
                                        <td>¬£2 per child</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Yoga Classes</strong></td>
                                        <td>Tuesdays and Thursdays</td>
                                        <td>Led by <input type="text" class="table-blank" id="q15" placeholder="15"></td>
                                    </tr>
                                    <tr>
                                        <td><strong>Equipment Hire</strong></td>
                                        <td>Available at reception</td>
                                        <td>Requires <input type="text" class="table-blank" id="q16" placeholder="16"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Form Completion Questions 17-20 -->
                    <div class="question-section">
                        <h3>Questions 17-20</h3>
                        <p style="color: #666; margin-bottom: 1.5rem; font-style: italic;">
                            Complete the membership application form below. Write NO MORE THAN TWO WORDS for each answer.
                        </p>
                        
                        <div class="form-container">
                            <div class="form-title">Recreation Center - Membership Application</div>
                            
                            <div class="form-grid">
                                <div class="form-field">
                                    <label class="form-field-label">17. Membership type most suitable for families:</label>
                                    <input type="text" class="form-field-input" id="q17" placeholder="Enter answer">
                                </div>
                                
                                <div class="form-field">
                                    <label class="form-field-label">18. Payment can be made by:</label>
                                    <input type="text" class="form-field-input" id="q18" placeholder="Enter answer">
                                </div>
                                
                                <div class="form-field">
                                    <label class="form-field-label">19. Free trial period lasts:</label>
                                    <input type="text" class="form-field-input" id="q19" placeholder="Enter answer">
                                </div>
                                
                                <div class="form-field">
                                    <label class="form-field-label">20. Membership cards available from:</label>
                                    <input type="text" class="form-field-input" id="q20" placeholder="Enter answer">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="submit-section">
                    <button class="submit-btn" onclick="submitTest()">Submit Test</button>
                </div>
            </section>

            <!-- Results Section -->
            <section id="results" class="results-section">
                <h2 class="section-title">
                    üìä Test Results & Analysis
                </h2>
                
                <div class="score-display">
                    <div class="score-number" id="scoreNumber">0</div>
                    <div class="score-text">out of 10 questions correct</div>
                </div>

                <div class="answer-review" id="answerReview">
                    <!-- Answer review will be populated by JavaScript -->
                </div>

                <div class="improvement-tips">
                    <h4>üí° Part 2 Improvement Tips</h4>
                    <ul id="improvementList">
                        <!-- Tips will be populated by JavaScript -->
                    </ul>
                </div>
            </section>
        </main>
    </div>

    <script>
        // Audio simulation and test data
        let audioContext = null;
        let isPlaying = false;
        let currentTime = 0;
        let totalDuration = 390; // 6.5 minutes in seconds
        let audioInterval = null;

        // Correct answers for Part 2 Practice 7
        const correctAnswers = {
            q11: 'seven',
            q12: '6 to 8',
            q13: '12',
            q14: '10 to 12',
            q15: 'qualified instructor',
            q16: 'photo identification',
            q17: 'family membership',
            q18: 'direct debit',
            q19: 'two weeks',
            q20: 'main reception'
        };

        // Question explanations
        const explanations = {
            q11: 'The manager mentions that the swimming pool is open seven days a week to accommodate all members.',
            q12: 'Fitness classes run Monday to Friday from 6 to 8 in the evening for working members.',
            q13: 'Tennis courts can be booked at ¬£12 per hour, which includes equipment if needed.',
            q14: 'Children\'s activities are held on Saturdays from 10 to 12 for different age groups.',
            q15: 'Yoga classes are led by a qualified instructor who has years of experience.',
            q16: 'Equipment hire requires photo identification as security for borrowing sports equipment.',
            q17: 'Family membership is most suitable for families as it covers multiple family members.',
            q18: 'Payment can be made by direct debit, which makes it very convenient as the monthly fee is automatically taken from your bank account.',
            q19: 'The free trial period lasts two weeks, which gives you the opportunity to try all our facilities and decide if membership is right for you.',
            q20: 'Membership cards are available from main reception. Our staff will take your photograph and issue your card immediately.'
        };

        // Community Recreation Center monologue script - broken into chunks for better TTS handling
        function getMonologueScript() {
            return [
                "Good afternoon, and welcome to the Riverside Community Recreation Centre. I'm David Thompson, the centre manager, and I'm delighted to show you around our fantastic facilities.",
                
                "Let me start by telling you about our swimming pool, which is one of our most popular facilities. The pool is open seven days a week, from early morning until late evening, so there's plenty of opportunity for a swim.",
                
                "We also run fitness classes throughout the week. These are held Monday to Friday from six to eight in the evening. The classes are included in your membership fee, so there's no extra charge.",
                
                "For those who enjoy racquet sports, we have two tennis courts available. These can be booked in advance, and the cost is twelve pounds per hour. This includes racquet hire if you need it.",
                
                "We're particularly proud of our children's activities programme. These sessions run on Saturdays from ten to twelve, and they're designed for different age groups. The cost is just two pounds per child.",
                
                "Our yoga classes are very popular and run on Tuesdays and Thursdays. These sessions are led by a qualified instructor who has many years of experience in different yoga styles.",
                
                "We also have equipment available for hire from the main reception desk. This includes sports equipment, fitness gear, and pool accessories. You'll need to bring photo identification as security when borrowing equipment.",
                
                "Now, let me tell you about our membership options. For families, I'd recommend our family membership, which is excellent value as it covers all family members living at the same address.",
                
                "Payment for membership can be made by direct debit, which makes it very convenient as the monthly fee is automatically taken from your bank account.",
                
                "We offer a free trial period that lasts two weeks. This gives you the opportunity to try all our facilities and decide if membership is right for you.",
                
                "If you decide to join us, membership cards are available from main reception. Our staff will take your photograph and issue your card immediately.",
                
                "We're open from six in the morning until ten at night, seven days a week. We look forward to welcoming you as a member of our community recreation centre."
            ];
        }

        // Audio control functions
        function playAudio() {
            console.log('üéß Play button clicked - starting audio playback');
            
            if (!checkInternetForAudio()) return;
            
            const playBtn = document.getElementById('playBtn');
            
            // Disable button during playback
            playBtn.disabled = true;
            playBtn.style.opacity = '0.6';
            playBtn.style.cursor = 'not-allowed';
            
            isPlaying = true;
            
            // Start audio simulation
            audioInterval = setInterval(updateProgress, 1000);
            
            // Check for speech synthesis support
            if (!('speechSynthesis' in window)) {
                console.error('Speech synthesis not supported');
                alert('Your browser does not support Text-to-Speech. Please try Chrome, Firefox, or Edge.');
                stopAudio();
                return;
            }
            
            console.log('Speech synthesis supported, proceeding...');
            
            // Cancel any existing speech
            speechSynthesis.cancel();
            
            // Wait a moment for cancellation to complete
            setTimeout(() => {
                const scriptChunks = getMonologueScript();
                console.log('Monologue script chunks:', scriptChunks.length);
                
                // Start playing chunks sequentially
                playAudioChunks(scriptChunks, 0);
            }, 100);
        }

        // Play audio in chunks to avoid TTS length limitations
        function playAudioChunks(chunks, currentIndex) {
            if (currentIndex >= chunks.length) {
                console.log('‚úÖ All audio chunks completed');
                stopAudio();
                return;
            }
            
            if (!isPlaying) {
                console.log('üõë Audio playback stopped by user');
                return;
            }
            
            const currentChunk = chunks[currentIndex];
            console.log(`üîä Playing chunk ${currentIndex + 1}/${chunks.length}: "${currentChunk.substring(0, 50)}..."`);
            
            const utterance = new SpeechSynthesisUtterance(currentChunk);
            utterance.rate = 0.8;
            utterance.pitch = 1;
            utterance.volume = 1.0;
            
            // Select voice - British English preference
            const voices = speechSynthesis.getVoices();
            if (voices.length > 0) {
                let selectedVoice = voices.find(voice => 
                    voice.lang === 'en-GB' || voice.name.includes('UK') || voice.name.includes('British')
                );
                
                if (!selectedVoice) {
                    selectedVoice = voices.find(voice => 
                        voice.lang.startsWith('en-') || voice.lang === 'en'
                    );
                }
                
                if (selectedVoice) {
                    utterance.voice = selectedVoice;
                    console.log(`üé§ Using voice: ${selectedVoice.name} (${selectedVoice.lang})`);
                }
            }
            
            utterance.onstart = function() {
                console.log(`‚úÖ Chunk ${currentIndex + 1} started`);
            };
            
            utterance.onend = function() {
                console.log(`‚úÖ Chunk ${currentIndex + 1} completed`);
                // Add small pause between chunks
                setTimeout(() => {
                    playAudioChunks(chunks, currentIndex + 1);
                }, 500);
            };
            
            utterance.onerror = function(event) {
                console.error(`‚ùå Error in chunk ${currentIndex + 1}:`, event.error);
                // Try to continue with next chunk
                setTimeout(() => {
                    playAudioChunks(chunks, currentIndex + 1);
                }, 1000);
            };
            
            try {
                speechSynthesis.speak(utterance);
            } catch (error) {
                console.error(`‚ùå Failed to speak chunk ${currentIndex + 1}:`, error);
                // Try next chunk
                setTimeout(() => {
                    playAudioChunks(chunks, currentIndex + 1);
                }, 1000);
            }
        }

        function stopAudio() {
            isPlaying = false;
            currentTime = 0;
            
            if (audioInterval) {
                clearInterval(audioInterval);
                audioInterval = null;
            }
            
            // Re-enable button
            const playBtn = document.getElementById('playBtn');
            playBtn.disabled = false;
            playBtn.style.opacity = '1';
            playBtn.style.cursor = 'pointer';
            
            // Reset progress
            document.getElementById('progressFill').style.width = '0%';
            document.getElementById('currentTime').textContent = '00:00';
            
            // Cancel speech synthesis
            if ('speechSynthesis' in window) {
                speechSynthesis.cancel();
            }
        }

        function updateProgress() {
            if (!isPlaying) return;
            
            currentTime++;
            const progressPercent = (currentTime / totalDuration) * 100;
            
            document.getElementById('progressFill').style.width = progressPercent + '%';
            document.getElementById('currentTime').textContent = formatTime(currentTime);
            
            if (currentTime >= totalDuration) {
                stopAudio();
            }
        }

        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        function checkInternetForAudio() {
            // Note: Speech synthesis works offline, but we check for basic browser compatibility
            console.log('üåê Network status:', navigator.onLine ? 'Online' : 'Offline');
            console.log('üîä Speech synthesis available:', 'speechSynthesis' in window);
            
            if (!('speechSynthesis' in window)) {
                alert('Text-to-Speech is not supported in your browser. Please use Chrome, Firefox, Edge, or Safari.');
                return false;
            }
            
            // Speech synthesis works offline, so we don't need internet
            return true;
        }

        // Test audio function for debugging
        function testAudio() {
            console.log('üß™ Testing audio system...');
            
            if (!('speechSynthesis' in window)) {
                alert('‚ùå Speech Synthesis not supported in this browser');
                return;
            }
            
            // Cancel any existing speech
            speechSynthesis.cancel();
            
            // Create a simple test utterance
            const testText = "Audio test successful. You should now be able to hear the practice audio.";
            const utterance = new SpeechSynthesisUtterance(testText);
            utterance.rate = 1;
            utterance.pitch = 1;
            utterance.volume = 1;
            
            utterance.onstart = function() {
                console.log('‚úÖ Test audio started successfully');
                alert('‚úÖ Audio test started! You should hear a voice saying "Audio test successful..."');
            };
            
            utterance.onend = function() {
                console.log('‚úÖ Test audio completed');
                alert('‚úÖ Audio test completed! The audio system is working. You can now try the main practice audio.');
            };
            
            utterance.onerror = function(event) {
                console.error('‚ùå Test audio error:', event.error);
                alert('‚ùå Audio test failed: ' + event.error + '. Please try a different browser or check your system audio settings.');
            };
            
            // Get voices and select one
            const voices = speechSynthesis.getVoices();
            console.log('üé§ Available voices for test:', voices.length);
            
            if (voices.length > 0) {
                // Try to find an English voice
                let voice = voices.find(v => v.lang.startsWith('en-')) || voices[0];
                utterance.voice = voice;
                console.log('üé§ Test using voice:', voice.name, voice.lang);
            }
            
            try {
                speechSynthesis.speak(utterance);
                console.log('üîä Test utterance sent to speech synthesis');
            } catch (error) {
                console.error('‚ùå Error starting test audio:', error);
                alert('‚ùå Failed to start audio test: ' + error.message);
            }
        }

        // Navigation and menu functions
        function handleBackButton() {
            console.log('üîÑ Back button clicked from IELTS General Listening Part 2 Practice 7 - Going to introduction');
            window.location.href = 'IELTS_General_Listening_Introduction.html';
        }

        function toggleMenu() {
            const menu = document.getElementById('slideMenu');
            const container = document.getElementById('container');
            const menuToggle = document.getElementById('menuToggle');
            
            menu.classList.toggle('collapsed');
            container.classList.toggle('menu-collapsed');
            menuToggle.classList.toggle('collapsed');
        }

        function navigateToSection(sectionId) {
            document.getElementById(sectionId).scrollIntoView({ 
                behavior: 'smooth', 
                block: 'start' 
            });
            
            // Auto-collapse menu on mobile
            if (window.innerWidth <= 768) {
                toggleMenu();
            }
        }

        // Test submission and scoring
        function submitTest() {
            let score = 0;
            const answers = {};
            const reviewHTML = [];
            
            // Get answers for all questions (11-20)
            for (let i = 11; i <= 20; i++) {
                const answer = document.getElementById(`q${i}`).value.trim().toLowerCase();
                answers[`q${i}`] = answer;
                
                const correct = correctAnswers[`q${i}`].toLowerCase();
                const isCorrect = answer === correct;
                if (isCorrect) score++;
                
                reviewHTML.push(`
                    <div class="review-item ${isCorrect ? 'correct' : 'incorrect'}">
                        <strong>Question ${i}:</strong> ${isCorrect ? '‚úÖ' : '‚ùå'}<br>
                        <strong>Your answer:</strong> ${answer || '<em>No answer</em>'}<br>
                        <strong>Correct answer:</strong> ${correctAnswers[`q${i}`]}<br>
                        <strong>Explanation:</strong> ${explanations[`q${i}`]}
                    </div>
                `);
            }
            
            // Update score display
            document.getElementById('scoreNumber').textContent = score;
            document.getElementById('answerReview').innerHTML = reviewHTML.join('');
            
            // Generate improvement tips
            const tips = generateImprovementTips(score);
            const tipsHTML = tips.map(tip => `<li>${tip}</li>`).join('');
            document.getElementById('improvementList').innerHTML = tipsHTML;
            
            // Show results section
            document.getElementById('results').style.display = 'block';
            document.getElementById('results').scrollIntoView({ 
                behavior: 'smooth', 
                block: 'start' 
            });
        }

        function generateImprovementTips(score) {
            const tips = [];
            
            if (score <= 3) {
                tips.push("Focus on listening for specific details like numbers, days, and times");
                tips.push("Practice table and form completion with recreation and facility vocabulary");
                tips.push("Work on understanding British accents and pronunciation patterns");
                tips.push("Listen to community center and facility announcements regularly");
            } else if (score <= 6) {
                tips.push("Develop better prediction skills by reading table headers and form fields before listening");
                tips.push("Practice identifying different types of information in structured formats");
                tips.push("Work on spelling accuracy and word limit compliance");
                tips.push("Focus on understanding schedules, prices, and facility details");
            } else if (score <= 8) {
                tips.push("Fine-tune your ability to distinguish between similar-sounding options");
                tips.push("Practice following complex facility descriptions and membership details");
                tips.push("Work on maintaining concentration throughout longer explanations");
                tips.push("Review vocabulary related to recreation, sports, and community facilities");
            } else {
                tips.push("Excellent work! Continue practicing with authentic IELTS materials");
                tips.push("Focus on time management to complete both table and form sections efficiently");
                tips.push("Practice with different British accents to prepare for test day variety");
                tips.push("Consider helping others to reinforce your own listening and completion skills");
            }
            
            return tips;
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                handleBackButton();
            } else if (event.code === 'Space' && !isPlaying) {
                event.preventDefault();
                playAudio();
            } else if (event.ctrlKey && event.key === 'Tab') {
                event.preventDefault();
                toggleMenu();
            }
        });

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üèÉ IELTS General Listening Part 2 Practice 7 - Community Recreation Center loaded');
            
            // Debug audio system
            console.log('üîä Browser audio capabilities:');
            console.log('- speechSynthesis available:', 'speechSynthesis' in window);
            console.log('- Web Audio API available:', 'AudioContext' in window || 'webkitAudioContext' in window);
            console.log('- User agent:', navigator.userAgent);
            
            // Test speech synthesis availability
            if ('speechSynthesis' in window) {
                setTimeout(() => {
                    const voices = speechSynthesis.getVoices();
                    console.log('üé§ Initial voices check:', voices.length, 'voices available');
                    if (voices.length === 0) {
                        console.log('‚è≥ Waiting for voices to load...');
                        speechSynthesis.addEventListener('voiceschanged', function() {
                            const newVoices = speechSynthesis.getVoices();
                            console.log('üé§ Voices loaded:', newVoices.length, 'voices now available');
                        });
                    }
                }, 1000);
            }
            
            // Set total time display
            document.getElementById('totalTime').textContent = formatTime(totalDuration);
            
            // Auto-focus on first input when questions section becomes visible
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting && entry.target.id === 'questions') {
                        setTimeout(() => {
                            const firstInput = document.getElementById('q11');
                            if (firstInput) firstInput.focus();
                        }, 500);
                    }
                });
            });
            
            const questionsSection = document.getElementById('questions');
            if (questionsSection) {
                observer.observe(questionsSection);
            }
        });

        // Clean up on page unload
        window.addEventListener('beforeunload', function() {
            if ('speechSynthesis' in window) {
                speechSynthesis.cancel();
            }
            if (audioInterval) {
                clearInterval(audioInterval);
            }
        });
    </script>
</body>
</html> 