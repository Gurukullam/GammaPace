<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IELTS General Speaking Part 3: Culture & Traditions | Gammapace</title>
    
    <!-- Standardized CSS with Part 3 Adaptations -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.3) 0%, rgba(139, 69, 19, 0.2) 50%, rgba(255, 215, 0, 0.1) 100%);
            min-height: 100vh;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 20%, rgba(255, 215, 0, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(212, 175, 55, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 60%, rgba(139, 69, 19, 0.05) 0%, transparent 50%);
            z-index: -1;
            pointer-events: none;
        }

        /* Header spacing */
        .header-spacer {
            height: 20px;
            width: 100%;
        }

        /* Master Guruvammal Logo as Back Button - Right Side */
        .gk-logo-container {
            position: fixed;
            top: 30px;
            right: 30px;
            z-index: 1002;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.3rem;
            cursor: pointer;
            padding: 5px;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .gk-logo-container:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(139, 69, 19, 0.3);
        }

        /* Master Guruvammal Logo */
        .master-guruvammal-logo {
            position: relative;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
            box-sizing: border-box;
            font-family: 'Century Gothic', sans-serif;
            font-size: 26px;
            font-weight: 900;
            letter-spacing: -1px;
            line-height: 1;
            color: #5d3a0a;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.3);
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(139, 69, 19, 0.25) 50%, rgba(205, 133, 63, 0.2) 100%);
            backdrop-filter: blur(10px);
            border-radius: 6px;
            padding: 10px;
            box-shadow: 0 8px 25px rgba(139, 69, 19, 0.3), 0 0 40px rgba(212, 175, 55, 0.2);
            z-index: 10000;
            transition: all 0.3s ease;
        }

        .master-guruvammal-logo .musical-corner {
            position: absolute;
            top: 3px;
            right: 4px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: transparent;
            border: 1px solid #5d3a0a;
            color: #5d3a0a;
            font-family: 'Century Gothic', sans-serif;
            font-size: 7px;
            font-weight: 900;
            display: flex;
            align-items: center;
            justify-content: center;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.3);
            box-shadow: none;
        }

        .master-guruvammal-logo:hover {
            transform: scale(1.1);
            box-shadow: 0 10px 30px rgba(139, 69, 19, 0.4), 0 0 50px rgba(212, 175, 55, 0.3);
        }

        .foundation-text {
            font-size: 1rem;
            font-weight: bold;
            color: #8b4513;
            font-family: 'Century Gothic', sans-serif;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.8);
        }

        .back-label {
            font-size: 0.75rem;
            font-weight: 600;
            color: #8b4513;
            font-family: 'Century Gothic', sans-serif;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.8);
            text-align: center;
            transition: all 0.3s ease;
        }

        .gk-logo-container:hover .back-label {
            color: #5d3a0a;
            transform: translateY(-1px);
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            margin-left: 360px;
            transition: margin-left 0.3s ease;
        }

        .container.menu-collapsed {
            margin-left: 20px;
        }

        /* Main Content */
        .main-content {
            margin-top: 0;
            padding: 1.5rem 2rem;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Menu Toggle Button - Professional Brown Gradient */
        .menu-toggle {
            position: fixed;
            top: 30px;
            left: 360px;
            background: linear-gradient(135deg, #8b4513, #a0522d);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.2);
            padding: 0.8rem;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            box-shadow: 0 4px 15px rgba(139, 69, 19, 0.3);
            z-index: 1001;
            transition: all 0.3s ease;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .menu-toggle.collapsed {
            left: 20px;
        }

        .menu-toggle:hover {
            background: linear-gradient(135deg, #a0522d, #8b4513);
            border-color: rgba(255, 255, 255, 0.4);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 69, 19, 0.4);
        }

        .menu-toggle-label {
            position: fixed;
            top: 85px;
            left: 382px;
            background: rgba(139, 69, 19, 0.9);
            color: white;
            padding: 0.3rem 0.6rem;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 600;
            text-align: center;
            box-shadow: 0 2px 8px rgba(139, 69, 19, 0.3);
            z-index: 1001;
            transition: all 0.3s ease;
            min-width: 45px;
            transform: translateX(-50%);
            pointer-events: none;
        }

        .menu-toggle-label.collapsed {
            left: 42px;
        }

        /* Slide-out Menu */
        .slide-menu {
            position: fixed;
            top: 0;
            left: 0;
            width: 350px;
            height: 100vh;
            background: rgba(255, 255, 255, 0.96);
            backdrop-filter: blur(20px);
            box-shadow: 4px 0 24px rgba(212, 175, 55, 0.15);
            border-right: 2px solid rgba(212, 175, 55, 0.15);
            transition: left 0.3s ease;
            z-index: 1000;
            overflow-y: auto;
            padding-top: 20px;
        }

        .slide-menu::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(180deg, rgba(255, 215, 0, 0.02) 0%, rgba(212, 175, 55, 0.03) 100%);
            z-index: 0;
            pointer-events: none;
        }

        .slide-menu.collapsed {
            left: -350px;
        }

        .menu-header {
            background: linear-gradient(135deg, #8b4513, #d4af37);
            color: white;
            padding: 2rem 1.5rem 1.2rem 1.5rem;
            text-align: center;
            position: relative;
            z-index: 2;
            margin-top: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-height: 70px;
            border-radius: 0 0 8px 8px;
            box-shadow: 0 4px 12px rgba(139, 69, 19, 0.2);
        }

        .menu-bookmark-title {
            font-size: 1rem;
            font-weight: 700;
            margin-bottom: 0.3rem;
        }

        .menu-subtitle {
            font-size: 0.85rem;
            opacity: 0.9;
            font-weight: 400;
        }

        .menu-content {
            padding: 1.5rem 0;
            position: relative;
            z-index: 2;
        }

        .menu-item {
            display: block;
            padding: 0.8rem 1.5rem;
            text-decoration: none;
            color: #333;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            border-left: 3px solid transparent;
        }

        .menu-item:hover {
            background: rgba(212, 175, 55, 0.1);
            border-left-color: #d4af37;
            transform: translateX(5px);
        }

        .menu-item.active {
            background: rgba(212, 175, 55, 0.15);
            border-left-color: #8b4513;
            font-weight: 600;
        }

        .item-title {
            font-size: 0.95rem;
            font-weight: 500;
        }

        /* Content sections */
        .content-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 3rem 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .section-title {
            font-size: 2.5rem;
            color: #8b4513;
            text-align: center;
            margin-bottom: 2rem;
            font-weight: 700;
        }

        .hero-title {
            font-size: 2.8rem;
            font-weight: bold;
            color: #8b4513;
            margin-bottom: 1rem;
            text-align: center;
        }

        .hero-subtitle {
            font-size: 1.3rem;
            color: #3c2d1f;
            margin-bottom: 2rem;
            text-align: center;
            padding: 1rem 2rem;
            background: rgba(212, 175, 55, 0.1);
            border-radius: 10px;
        }

        /* Part 3 Specific: Discussion Section */
        .discussion-section {
            background: rgba(212, 175, 55, 0.05);
            border: 2px solid rgba(212, 175, 55, 0.3);
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .discussion-question {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(139, 69, 19, 0.2);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1rem 0;
            box-shadow: 0 4px 15px rgba(139, 69, 19, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .discussion-question:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(139, 69, 19, 0.15);
        }

        .discussion-question.active {
            border-color: #8b4513;
            background: rgba(212, 175, 55, 0.1);
        }

        .discussion-question h4 {
            color: #8b4513;
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            font-weight: bold;
        }

        .question-tips {
            background: rgba(139, 69, 19, 0.05);
            padding: 1rem;
            border-radius: 8px;
            margin-top: 1rem;
            font-size: 0.9rem;
            color: #666;
            display: none;
        }

        .discussion-question.active .question-tips {
            display: block;
        }

        /* Question Selection */
        .question-selection {
            text-align: center;
            margin: 2rem 0;
        }

        #questionSelect {
            padding: 0.5rem;
            border-radius: 5px;
            border: 1px solid #d4af37;
            font-size: 0.9rem;
            width: 100%;
            max-width: 700px;
            margin: 0 auto;
            display: block;
        }

        /* Timer Display */
        .timer-display {
            background: rgba(139, 69, 19, 0.1);
            border-radius: 10px;
            padding: 1rem;
            text-align: center;
            margin: 1rem 0;
        }

        .timer {
            font-size: 2rem;
            font-weight: bold;
            color: #8b4513;
            font-family: 'Courier New', monospace;
        }

        .timer-label {
            font-size: 0.9rem;
            color: #666;
            margin-top: 0.5rem;
        }

        /* Control Buttons */
        .control-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
            margin: 2rem 0;
        }

        .control-btn {
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s ease;
            min-width: 140px;
        }

        .record-btn {
            background: linear-gradient(135deg, #f44336, #da190b);
            color: white;
        }

        .record-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(244, 67, 54, 0.3);
        }

        .stop-btn {
            background: linear-gradient(135deg, #607d8b, #455a64);
            color: white;
        }

        .stop-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(96, 125, 139, 0.3);
        }

        .play-btn {
            background: linear-gradient(135deg, #2196f3, #1976d2);
            color: white;
        }

        .play-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.3);
        }

        .process-btn {
            background: linear-gradient(135deg, #ff9800, #f57c00);
            color: white;
        }

        .process-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(255, 152, 0, 0.3);
        }

        .next-btn {
            background: linear-gradient(135deg, #8b4513, #a0522d);
            color: white;
        }

        .next-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(139, 69, 19, 0.3);
        }

        /* Navigation Buttons */
        .navigation-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin: 2rem 0;
        }

        /* Analysis Results */
        .analysis-section {
            display: none;
            margin-top: 2rem;
        }

        .analysis-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin: 2rem 0;
        }

        .analysis-card {
            background: rgba(255, 255, 255, 0.8);
            padding: 1.5rem;
            border-radius: 10px;
            border: 1px solid rgba(212, 175, 55, 0.3);
        }

        .analysis-card h3 {
            color: #8b4513;
            margin-bottom: 1rem;
        }

        /* Band Score Guidance */
        .band-guidance {
            background: rgba(139, 69, 19, 0.05);
            border-left: 4px solid #d4af37;
            padding: 1.5rem;
            border-radius: 8px;
            margin: 2rem 0;
        }

        .band-guidance h3 {
            color: #8b4513;
            margin-bottom: 1rem;
        }

        .band-criteria {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .criteria-item {
            background: rgba(255, 255, 255, 0.7);
            padding: 1rem;
            border-radius: 8px;
        }

        .criteria-item h4 {
            color: #8b4513;
            margin-bottom: 0.5rem;
            font-size: 0.95rem;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .content-section {
                padding: 1.5rem 0.5rem;
            }

            .hero-title {
                font-size: 2.2rem;
            }

            .hero-subtitle {
                font-size: 1.2rem;
                padding: 0.8rem 1.5rem;
            }

            .section-title {
                font-size: 2rem;
            }

            .slide-menu {
                width: 100%;
                left: -100%;
            }

            .container {
                margin-left: 0 !important;
            }

            .menu-toggle {
                left: 30px;
            }

            .menu-toggle-label {
                left: 55px;
            }

            .gk-logo-container {
                top: 100px;
                right: 20px;
                padding: 3px;
            }

            .master-guruvammal-logo {
                width: 40px;
                height: 40px;
                font-size: 20px;
                padding: 8px;
            }

            .master-guruvammal-logo .musical-corner {
                font-size: 8px;
                top: 1px;
                right: 2px;
            }

            .back-label {
                font-size: 0.7rem;
            }

            .control-buttons {
                flex-direction: column;
                align-items: center;
            }

            .analysis-grid {
                grid-template-columns: 1fr;
            }

            .band-criteria {
                grid-template-columns: 1fr;
            }
        }

        /* Animation Classes */
        .fade-in {
            animation: fadeIn 1s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .slide-up {
            animation: slideUp 0.8s ease-out;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <!-- Master Guruvammal Logo as Back Button -->
    <div class="gk-logo-container" onclick="handleBackButton()" title="Back to Speaking Introduction">
        <div class="master-guruvammal-logo">
            Ga<span class="musical-corner">P</span>
        </div>
        <div class="back-label">Back</div>
    </div>

    <!-- Menu Toggle Button -->
    <button class="menu-toggle" onclick="toggleMenu()" id="menuToggle">
        ‹
    </button>
    <div class="menu-toggle-label" id="menuToggleLabel">Collapse</div>

    <!-- Slide-out Menu -->
    <div class="slide-menu" id="slideMenu">
        <div class="menu-header">
            <div class="menu-bookmark-title">IELTS Speaking Part 3</div>
            <div class="menu-subtitle">Culture & Traditions - Discussion Practice</div>
        </div>
        <div class="menu-content">
            <div class="menu-item" onclick="scrollToSection('instructions')">📋 Instructions</div>
            <div class="menu-item active" onclick="scrollToSection('discussion')">🗣️ Discussion Questions</div>
            <div class="menu-item" onclick="scrollToSection('recording')">🎙️ Recording Studio</div>
            <div class="menu-item" onclick="scrollToSection('analysis')">📊 Analysis Results</div>
            <div class="menu-item" onclick="scrollToSection('guidance')">🎓 Band Score Guidance</div>
        </div>
    </div>

    <!-- Header Spacer -->
    <div class="header-spacer"></div>

    <!-- Main Container -->
    <div class="container" id="container">
        <div class="main-content">
            <!-- Hero Section -->
            <section class="content-section fade-in" id="instructions">
                <h1 class="hero-title">IELTS General Speaking Part 3: Culture & Traditions</h1>
                <div class="hero-subtitle">
                    Master cultural discussions with our interactive practice studio
                </div>
                
                <div style="text-align: center; color: #666; font-size: 1.1rem; line-height: 1.8; margin: 2rem 0;">
                    <p><strong>Part 3 Format:</strong> This is a two-way discussion between you and the examiner about abstract topics related to Part 2. You need to give <strong>detailed responses</strong> with examples and explanations. <strong>No preparation time</strong> - respond immediately with depth and analysis.</p>
                </div>

                <!-- Question Selection -->
                <div class="question-selection">
                    <h3 style="color: #8b4513; margin-bottom: 1rem;">Select a Discussion Topic:</h3>
                    <select id="questionSelect" onchange="updateCurrentQuestion()">
                        <option value="1">Cultural Preservation & Change</option>
                        <option value="2">Traditional vs Modern Values</option>
                        <option value="3">Cultural Identity & Globalization</option>
                        <option value="4">Festivals & Cultural Celebrations</option>
                        <option value="5">Inter-cultural Understanding</option>
                        <option value="6">Cultural Heritage & Future</option>
                    </select>
                </div>
            </section>

            <!-- Discussion Questions Section -->
            <section class="content-section slide-up" id="discussion">
                <h2 class="section-title">🗣️ Discussion Questions</h2>
                
                <div class="discussion-section" id="discussionContent">
                    <div class="discussion-question active" onclick="selectQuestion(1)">
                        <h4>How important is it to preserve traditional culture?</h4>
                        <div class="question-tips">
                            <strong>Tips:</strong> Discuss cultural identity, heritage value, historical knowledge preservation. Consider benefits vs challenges, give specific examples of traditions worth preserving.
                        </div>
                    </div>
                    
                    <div class="discussion-question" onclick="selectQuestion(2)">
                        <h4>How has globalization affected local cultures?</h4>
                        <div class="question-tips">
                            <strong>Tips:</strong> Present balanced view - cultural exchange benefits vs loss of unique traditions. Mention specific examples like food, language, customs, entertainment.
                        </div>
                    </div>
                    
                    <div class="discussion-question" onclick="selectQuestion(3)">
                        <h4>Should younger generations follow traditional customs?</h4>
                        <div class="question-tips">
                            <strong>Tips:</strong> Discuss generational differences, adaptation vs preservation, personal choice, cultural continuity, modern relevance of traditions.
                        </div>
                    </div>
                    
                    <div class="discussion-question" onclick="selectQuestion(4)">
                        <h4>What are the benefits of learning about other cultures?</h4>
                        <div class="question-tips">
                            <strong>Tips:</strong> Mention tolerance, understanding, perspective broadening, business advantages, personal growth, global citizenship.
                        </div>
                    </div>
                    
                    <div class="discussion-question" onclick="selectQuestion(5)">
                        <h4>How do cultural festivals contribute to society?</h4>
                        <div class="question-tips">
                            <strong>Tips:</strong> Discuss community building, economic benefits, cultural education, tourism, preservation of traditions, social cohesion.
                        </div>
                    </div>
                    
                    <div class="discussion-question" onclick="selectQuestion(6)">
                        <h4>Can traditional and modern lifestyles coexist successfully?</h4>
                        <div class="question-tips">
                            <strong>Tips:</strong> Give examples of successful integration, discuss challenges and solutions, mention different approaches in various countries.
                        </div>
                    </div>
                </div>

                <!-- Timer Display (for practice timing) -->
                <div class="timer-display">
                    <div class="timer" id="timerDisplay">00:00</div>
                    <div class="timer-label" id="timerLabel">Response Time</div>
                </div>
            </section>

            <!-- Recording Studio Section -->
            <section class="content-section" id="recording">
                <h2 class="section-title">🎙️ Recording Studio</h2>
                
                <div style="text-align: center; color: #666; margin: 1rem 0;">
                    <p>Select a question above and click "Start Recording" to practice your response. Aim for detailed, analytical answers with examples.</p>
                </div>

                <!-- Control Buttons -->
                <div class="control-buttons">
                    <button class="control-btn record-btn" id="recordBtn" onclick="startRecording()">
                        🎤 Start Recording
                    </button>
                    <button class="control-btn stop-btn" id="stopBtn" onclick="stopRecording()" disabled>
                        ⏹️ Stop Recording
                    </button>
                    <button class="control-btn play-btn" id="playBtn" onclick="playRecording()" disabled>
                        ▶️ Play Recording
                    </button>
                    <button class="control-btn process-btn" id="processBtn" onclick="processAudio()" disabled>
                        🔄 Submit for Analysis
                    </button>
                </div>

                <!-- Audio Visualization -->
                <div style="text-align: center; margin: 2rem 0;">
                    <canvas id="audioCanvas" width="400" height="100" style="border: 1px solid #ddd; border-radius: 5px; display: none;"></canvas>
                </div>
            </section>

            <!-- Analysis Results Section -->
            <section class="content-section analysis-section" id="analysis">
                <h2 class="section-title">📊 Analysis Results</h2>
                
                <div class="analysis-grid">
                    <!-- Example Response -->
                    <div class="analysis-card">
                        <h3>📝 Example Response</h3>
                        <div id="transcriptResult" style="background: rgba(139, 69, 19, 0.05); padding: 1rem; border-radius: 8px; border-left: 4px solid #d4af37; font-style: italic; line-height: 1.6;">
                            Your speech transcript will appear here after analysis...
                        </div>
                    </div>
                    
                    <!-- Analysis & Feedback -->
                    <div class="analysis-card">
                        <h3>🎯 Analysis & Feedback</h3>
                        <div id="analysisResult" style="line-height: 1.6;">
                            Detailed analysis and improvement suggestions will appear here...
                        </div>
                    </div>
                </div>

                <!-- Navigation Buttons -->
                <div class="navigation-buttons">
                    <button class="control-btn next-btn" onclick="goToNextQuestion()">
                        ➡️ Next Topic
                    </button>
                    <button class="control-btn next-btn" onclick="refreshCurrentQuestion()">
                        🔄 Retry This Topic
                    </button>
                </div>
            </section>

            <!-- Band Score Guidance -->
            <section class="content-section" id="guidance">
                <h2 class="section-title">🎓 Band Score Guidance</h2>
                
                <div class="band-guidance">
                    <h3>Part 3 Success Strategies for Culture & Traditions Discussions</h3>
                    <p>To achieve a high band score in Part 3 cultural discussions, focus on these key areas:</p>
                    
                    <div class="band-criteria">
                        <div class="criteria-item">
                            <h4>🗣️ Fluency & Coherence</h4>
                            <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
                                <li>Compare different cultural perspectives clearly</li>
                                <li>Use appropriate cultural discourse markers</li>
                                <li>Present balanced arguments about tradition vs change</li>
                                <li>Connect personal and global cultural experiences</li>
                            </ul>
                        </div>
                        
                        <div class="criteria-item">
                            <h4>📚 Lexical Resource</h4>
                            <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
                                <li>Use precise cultural and anthropological vocabulary</li>
                                <li>Show range of tradition and heritage terms</li>
                                <li>Include appropriate cultural comparison language</li>
                                <li>Use respectful and sensitive cultural language</li>
                            </ul>
                        </div>
                        
                        <div class="criteria-item">
                            <h4>⚙️ Grammatical Range</h4>
                            <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
                                <li>Use comparative and contrastive structures</li>
                                <li>Apply conditional forms for cultural hypotheses</li>
                                <li>Include modal verbs for cultural norms</li>
                                <li>Use complex sentences for cultural analysis</li>
                            </ul>
                        </div>
                        
                        <div class="criteria-item">
                            <h4>🎯 Pronunciation</h4>
                            <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
                                <li>Clear articulation of cultural terms</li>
                                <li>Appropriate stress for emphasis and contrast</li>
                                <li>Natural intonation for cultural descriptions</li>
                                <li>Confident delivery of cultural observations</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div style="background: rgba(212, 175, 55, 0.1); padding: 1rem; border-radius: 8px; margin-top: 1.5rem;">
                        <h4 style="color: #8b4513; margin-bottom: 0.5rem;">💡 Cultural Discussion Tips:</h4>
                        <ul style="padding-left: 1.5rem; line-height: 1.6;">
                            <li><strong>Be respectful</strong> - Show appreciation for all cultures while discussing differences</li>
                            <li><strong>Use examples</strong> - Draw from your own culture and others you know about</li>
                            <li><strong>Show complexity</strong> - Acknowledge that cultures have both positive and negative aspects</li>
                            <li><strong>Consider change</strong> - Discuss how cultures evolve while maintaining core values</li>
                            <li><strong>Think globally</strong> - Consider cultural exchange and globalization impacts</li>
                        </ul>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // Discussion topics data
        const discussionTopics = {
            1: {
                title: "Cultural Preservation & Change",
                questions: [
                    {
                        question: "How important is it to preserve traditional culture?",
                        tips: "Discuss cultural identity, heritage value, historical knowledge preservation. Consider benefits vs challenges, give specific examples of traditions worth preserving."
                    },
                    {
                        question: "How has globalization affected local cultures?",
                        tips: "Present balanced view - cultural exchange benefits vs loss of unique traditions. Mention specific examples like food, language, customs, entertainment."
                    },
                    {
                        question: "Should younger generations follow traditional customs?",
                        tips: "Discuss generational differences, adaptation vs preservation, personal choice, cultural continuity, modern relevance of traditions."
                    },
                    {
                        question: "What are the benefits of learning about other cultures?",
                        tips: "Mention tolerance, understanding, perspective broadening, business advantages, personal growth, global citizenship."
                    },
                    {
                        question: "How do cultural festivals contribute to society?",
                        tips: "Discuss community building, economic benefits, cultural education, tourism, preservation of traditions, social cohesion."
                    },
                    {
                        question: "Can traditional and modern lifestyles coexist successfully?",
                        tips: "Give examples of successful integration, discuss challenges and solutions, mention different approaches in various countries."
                    }
                ]
            },
            2: {
                title: "Traditional vs Modern Values",
                questions: [
                    {
                        question: "What are the main differences between traditional and modern family structures?",
                        tips: "Compare extended vs nuclear families, gender roles, child-rearing practices, respect for elders, decision-making processes."
                    },
                    {
                        question: "How have work values changed between generations?",
                        tips: "Discuss work-life balance, career priorities, job loyalty, entrepreneurship, remote work attitudes."
                    },
                    {
                        question: "Are traditional gender roles still relevant today?",
                        tips: "Present balanced view, discuss changing expectations, equality issues, choice vs tradition, different cultural approaches."
                    },
                    {
                        question: "How should societies balance tradition with progress?",
                        tips: "Consider selective preservation, adaptation strategies, democratic decision-making, respecting minority traditions."
                    },
                    {
                        question: "What traditional values are worth keeping in modern society?",
                        tips: "Discuss respect, community solidarity, craftsmanship, environmental wisdom, family bonds, hospitality."
                    },
                    {
                        question: "How do modern values challenge traditional authority?",
                        tips: "Consider individual rights, questioning authority, democratic principles, generational conflicts, social change."
                    }
                ]
            },
            3: {
                title: "Cultural Identity & Globalization",
                questions: [
                    {
                        question: "How do people maintain cultural identity in a globalized world?",
                        tips: "Discuss language preservation, cultural education, community organizations, cultural pride, adaptation strategies."
                    },
                    {
                        question: "What are the positive and negative effects of cultural mixing?",
                        tips: "Consider creativity, innovation, understanding vs confusion, loss of authenticity, identity crises."
                    },
                    {
                        question: "Should immigrants adopt the culture of their new country?",
                        tips: "Discuss integration vs assimilation, multiculturalism, mutual adaptation, maintaining heritage, practical considerations."
                    },
                    {
                        question: "How does media influence cultural identity?",
                        tips: "Consider global entertainment, social media, language influence, role models, representation issues."
                    },
                    {
                        question: "Can a person belong to multiple cultures simultaneously?",
                        tips: "Discuss multicultural identity, third culture kids, hybrid identities, challenges and advantages."
                    },
                    {
                        question: "What role does language play in cultural identity?",
                        tips: "Consider mother tongue importance, bilingualism, language loss, cultural concepts, emotional connection."
                    }
                ]
            },
            4: {
                title: "Festivals & Cultural Celebrations",
                questions: [
                    {
                        question: "Why are festivals important for communities?",
                        tips: "Discuss social bonding, cultural transmission, economic benefits, identity reinforcement, seasonal marking."
                    },
                    {
                        question: "How have traditional festivals adapted to modern times?",
                        tips: "Consider commercialization, technology integration, urban adaptations, shortened celebrations, global influence."
                    },
                    {
                        question: "Should governments support cultural festivals?",
                        tips: "Discuss cultural preservation, tourism promotion, community cohesion, costs vs benefits, cultural diversity."
                    },
                    {
                        question: "What can people learn from attending cultural festivals?",
                        tips: "Consider cultural appreciation, historical understanding, art and music exposure, food experiences, social interaction."
                    },
                    {
                        question: "How do religious and secular festivals differ in their social impact?",
                        tips: "Compare spiritual vs cultural significance, participation patterns, community effects, inclusivity issues."
                    },
                    {
                        question: "Are international cultural exchanges through festivals valuable?",
                        tips: "Discuss cultural diplomacy, mutual understanding, stereotype reduction, artistic inspiration, global connections."
                    }
                ]
            },
            5: {
                title: "Inter-cultural Understanding",
                questions: [
                    {
                        question: "What are the biggest barriers to intercultural communication?",
                        tips: "Discuss language differences, cultural assumptions, stereotypes, non-verbal communication, value conflicts."
                    },
                    {
                        question: "How can schools promote cultural understanding?",
                        tips: "Consider curriculum diversity, exchange programs, multicultural events, language learning, inclusive education."
                    },
                    {
                        question: "What role does travel play in cultural understanding?",
                        tips: "Discuss exposure benefits, stereotype challenging, personal growth, limitations of tourism, authentic interactions."
                    },
                    {
                        question: "How can workplaces become more culturally inclusive?",
                        tips: "Consider diversity training, cultural awareness, religious accommodations, communication styles, leadership diversity."
                    },
                    {
                        question: "Are cultural stereotypes always harmful?",
                        tips: "Discuss positive vs negative stereotypes, oversimplification issues, initial understanding vs deep knowledge, media influence."
                    },
                    {
                        question: "How can communities resolve cultural conflicts?",
                        tips: "Consider dialogue facilitation, mediation, education, shared activities, mutual respect, compromise solutions."
                    }
                ]
            },
            6: {
                title: "Cultural Heritage & Future",
                questions: [
                    {
                        question: "How can traditional arts and crafts survive in the modern economy?",
                        tips: "Discuss market adaptation, cultural tourism, government support, education programs, online platforms."
                    },
                    {
                        question: "What will happen to minority cultures in the future?",
                        tips: "Consider globalization effects, technology's role, preservation efforts, adaptation strategies, policy support."
                    },
                    {
                        question: "How is technology changing cultural expression?",
                        tips: "Discuss digital art, social media culture, virtual reality experiences, online communities, new creative forms."
                    },
                    {
                        question: "Should cultural sites be developed for tourism?",
                        tips: "Balance preservation vs access, economic benefits vs damage risks, local community interests, sustainable tourism."
                    },
                    {
                        question: "How will future generations learn about their cultural heritage?",
                        tips: "Consider digital preservation, virtual museums, family transmission, formal education, immersive technologies."
                    },
                    {
                        question: "What new cultural traditions might emerge in the digital age?",
                        tips: "Discuss online communities, digital celebrations, virtual reality culture, social media traditions, global connectivity."
                    }
                ]
            }
        };

        // Audio recording variables
        let mediaRecorder;
        let audioChunks = [];
        let originalAudioBlob = null;
        let isRecording = false;
        let timerInterval;
        let recordingStartTime;
        let audioContext;
        let analyser;
        let microphone;
        let dataArray;
        let animationFrameId;

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const questionParam = urlParams.get('question');
            
            if (questionParam && discussionTopics[questionParam]) {
                document.getElementById('questionSelect').value = questionParam;
                updateCurrentQuestion();
            }
            
            console.log('✅ IELTS Speaking Part 3 - Culture & Traditions loaded');
        });

        // Back button navigation
        function handleBackButton() {
            console.log('🔄 Back button clicked from IELTS Speaking Part 3 - Going to Speaking Introduction');
            window.location.href = 'IELTS_General_Speaking_Introduction.html';
        }

        // Menu toggle functionality
        function toggleMenu() {
            const menu = document.getElementById('slideMenu');
            const toggleBtn = document.getElementById('menuToggle');
            const toggleLabel = document.getElementById('menuToggleLabel');
            const container = document.getElementById('container');
            const isCollapsed = menu.classList.contains('collapsed');
            
            if (isCollapsed) {
                menu.classList.remove('collapsed');
                toggleBtn.classList.remove('collapsed');
                toggleLabel.classList.remove('collapsed');
                container.classList.remove('menu-collapsed');
                toggleBtn.innerHTML = '‹';
                toggleLabel.textContent = 'Collapse';
            } else {
                menu.classList.add('collapsed');
                toggleBtn.classList.add('collapsed');
                toggleLabel.classList.add('collapsed');
                container.classList.add('menu-collapsed');
                toggleBtn.innerHTML = '›';
                toggleLabel.textContent = 'Expand';
            }
        }

        // Update discussion content
        function updateCurrentQuestion() {
            const questionSelect = document.getElementById('questionSelect');
            const topicNum = questionSelect.value;
            const topic = discussionTopics[topicNum];
            
            if (topic) {
                const discussionContent = document.getElementById('discussionContent');
                discussionContent.innerHTML = topic.questions.map((q, index) => `
                    <div class="discussion-question ${index === 0 ? 'active' : ''}" onclick="selectQuestion(${index + 1})">
                        <h4>${q.question}</h4>
                        <div class="question-tips">
                            <strong>Tips:</strong> ${q.tips}
                        </div>
                    </div>
                `).join('');
                
                // Reset everything
                resetSession();
                
                // Update URL
                const url = new URL(window.location);
                url.searchParams.set('question', topicNum);
                window.history.pushState({}, '', url.toString());
            }
        }

        // Select question
        function selectQuestion(questionNum) {
            const questions = document.querySelectorAll('.discussion-question');
            questions.forEach((q, index) => {
                q.classList.toggle('active', index === questionNum - 1);
            });
        }

        // Start recording
        async function startRecording() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ 
                    audio: {
                        sampleRate: 44100,
                        channelCount: 1,
                        volume: 1.0
                    } 
                });
                
                // Setup audio context for visualization
                setupAudioVisualization(stream);
                
                mediaRecorder = new MediaRecorder(stream, {
                    mimeType: 'audio/webm;codecs=opus'
                });
                
                audioChunks = [];
                
                mediaRecorder.ondataavailable = event => {
                    if (event.data.size > 0) {
                        audioChunks.push(event.data);
                    }
                };
                
                mediaRecorder.onstop = () => {
                    originalAudioBlob = new Blob(audioChunks, { type: 'audio/webm' });
                    document.getElementById('playBtn').disabled = false;
                    document.getElementById('processBtn').disabled = false;
                    
                    // Stop all audio tracks
                    stream.getTracks().forEach(track => track.stop());
                };
                
                mediaRecorder.start();
                isRecording = true;
                recordingStartTime = Date.now();
                
                // Start timer
                timerInterval = setInterval(updateTimer, 100);
                
                // Update button states
                document.getElementById('recordBtn').disabled = true;
                document.getElementById('stopBtn').disabled = false;
                document.getElementById('recordBtn').textContent = '🎤 Recording...';
                
                // Show audio visualization
                document.getElementById('audioCanvas').style.display = 'block';
                
            } catch (error) {
                console.error('Error accessing microphone:', error);
                alert('Error accessing microphone. Please ensure you have granted microphone permissions.');
            }
        }

        // Update timer
        function updateTimer() {
            if (isRecording && recordingStartTime) {
                const elapsed = Math.floor((Date.now() - recordingStartTime) / 1000);
                const minutes = Math.floor(elapsed / 60);
                const seconds = elapsed % 60;
                document.getElementById('timerDisplay').textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }
        }

        // Stop recording
        function stopRecording() {
            if (mediaRecorder && isRecording) {
                mediaRecorder.stop();
                isRecording = false;
                
                clearInterval(timerInterval);
                
                // Update button states
                document.getElementById('recordBtn').disabled = false;
                document.getElementById('stopBtn').disabled = true;
                document.getElementById('recordBtn').textContent = '🎤 Start Recording';
                
                // Hide audio visualization
                document.getElementById('audioCanvas').style.display = 'none';
                if (animationFrameId) {
                    cancelAnimationFrame(animationFrameId);
                }
                
                document.getElementById('timerLabel').textContent = 'Recording Complete';
            }
        }

        // Play recorded audio
        function playRecording() {
            if (originalAudioBlob) {
                const audioUrl = URL.createObjectURL(originalAudioBlob);
                const audio = new Audio(audioUrl);
                audio.play();
            }
        }

        // Setup audio visualization
        function setupAudioVisualization(stream) {
            audioContext = new (window.AudioContext || window.webkitAudioContext)();
            analyser = audioContext.createAnalyser();
            microphone = audioContext.createMediaStreamSource(stream);
            
            analyser.fftSize = 256;
            const bufferLength = analyser.frequencyBinCount;
            dataArray = new Uint8Array(bufferLength);
            
            microphone.connect(analyser);
            
            const canvas = document.getElementById('audioCanvas');
            const canvasCtx = canvas.getContext('2d');
            
            function draw() {
                if (!isRecording) return;
                
                analyser.getByteFrequencyData(dataArray);
                
                canvasCtx.fillStyle = 'rgb(240, 240, 240)';
                canvasCtx.fillRect(0, 0, canvas.width, canvas.height);
                
                const barWidth = canvas.width / bufferLength * 2.5;
                let barHeight;
                let x = 0;
                
                for (let i = 0; i < bufferLength; i++) {
                    barHeight = dataArray[i] / 2;
                    
                    const red = 139;
                    const green = 69 + (barHeight / 4);
                    const blue = 19;
                    
                    canvasCtx.fillStyle = `rgb(${red},${green},${blue})`;
                    canvasCtx.fillRect(x, canvas.height - barHeight, barWidth, barHeight);
                    
                    x += barWidth + 1;
                }
                
                animationFrameId = requestAnimationFrame(draw);
            }
            
            draw();
        }

        // Process audio for analysis
        function processAudio() {
            if (!originalAudioBlob) {
                alert('Please record audio first.');
                return;
            }
            
            // Show analysis section
            document.querySelector('.analysis-section').style.display = 'block';
            document.getElementById('analysis').scrollIntoView({ behavior: 'smooth' });
            
            // Simulate processing
            const transcriptDiv = document.getElementById('transcriptResult');
            const analysisDiv = document.getElementById('analysisResult');
            
            transcriptDiv.innerHTML = '<div style="text-align: center; color: #666;"><em>🔄 Processing your speech...</em></div>';
            analysisDiv.innerHTML = '<div style="text-align: center; color: #666;"><em>🔄 Analyzing your response...</em></div>';
            
            // Simulate analysis delay
            setTimeout(() => {
                transcriptDiv.innerHTML = `
                    <p><em>"Traditional culture preservation is crucial for several interconnected reasons. Firstly, it maintains our collective memory and identity - these customs and practices represent accumulated wisdom from generations before us. When we lose traditional knowledge, whether it's about sustainable farming practices, medicinal plants, or artisanal skills, we lose invaluable human heritage. However, preservation shouldn't mean complete resistance to change. The most successful cultural preservation involves adaptation - taking the core values and wisdom while allowing for evolution. For example, traditional Japanese tea ceremony maintains its philosophical essence while adapting to modern urban life. I believe the key is selective preservation - identifying which elements truly define a culture's identity and which can evolve with changing times."</em></p>
                `;
                
                analysisDiv.innerHTML = `
                    <div style="margin-bottom: 1rem;">
                        <h4 style="color: #8b4513; margin-bottom: 0.5rem;">✅ Strengths:</h4>
                        <ul style="color: #2e7d32; padding-left: 1.5rem;">
                            <li>Sophisticated cultural vocabulary (collective memory, artisanal skills, heritage)</li>
                            <li>Balanced argument showing both preservation and adaptation</li>
                            <li>Excellent concrete example (Japanese tea ceremony)</li>
                            <li>Clear structure with logical flow from importance to implementation</li>
                            <li>Shows cultural sensitivity and analytical thinking</li>
                        </ul>
                    </div>
                    <div style="margin-bottom: 1rem;">
                        <h4 style="color: #8b4513; margin-bottom: 0.5rem;">🎯 Areas for Improvement:</h4>
                        <ul style="color: #d84315; padding-left: 1.5rem;">
                            <li>Could add more diverse cultural examples from different regions</li>
                            <li>Include discussion of challenges in preservation efforts</li>
                            <li>Add perspective on government or community roles</li>
                            <li>Extend discussion of economic aspects of cultural preservation</li>
                        </ul>
                    </div>
                    <div style="background: rgba(139, 69, 19, 0.1); padding: 1rem; border-radius: 8px;">
                        <h4 style="color: #8b4513; margin-bottom: 0.5rem;">📊 Estimated Band Score: 8.5-9.0</h4>
                        <p style="font-size: 0.9rem; color: #666; line-height: 1.5;">
                            Outstanding response demonstrating sophisticated understanding of cultural complexity with excellent vocabulary range and balanced analytical approach. Shows cultural sensitivity and deep thinking about preservation challenges.
                        </p>
                    </div>
                `;
            }, 2000);
        }

        // Navigation functions
        function goToNextQuestion() {
            const currentTopic = parseInt(document.getElementById('questionSelect').value);
            const nextTopic = currentTopic >= 6 ? 1 : currentTopic + 1;
            document.getElementById('questionSelect').value = nextTopic;
            updateCurrentQuestion();
            document.getElementById('discussion').scrollIntoView({ behavior: 'smooth' });
        }

        function refreshCurrentQuestion() {
            resetSession();
            document.getElementById('instructions').scrollIntoView({ behavior: 'smooth' });
        }

        // Reset session
        function resetSession() {
            // Stop any ongoing recording
            if (isRecording) {
                stopRecording();
            }
            
            // Clear timers
            if (timerInterval) {
                clearInterval(timerInterval);
            }
            
            // Reset button states
            document.getElementById('recordBtn').disabled = false;
            document.getElementById('recordBtn').textContent = '🎤 Start Recording';
            document.getElementById('stopBtn').disabled = true;
            document.getElementById('playBtn').disabled = true;
            document.getElementById('processBtn').disabled = true;
            
            // Reset timer display
            document.getElementById('timerDisplay').textContent = '00:00';
            document.getElementById('timerLabel').textContent = 'Response Time';
            
            // Hide analysis section
            document.querySelector('.analysis-section').style.display = 'none';
            
            // Reset variables
            isRecording = false;
            audioChunks = [];
            originalAudioBlob = null;
            recordingStartTime = null;
            
            // Hide audio visualization
            document.getElementById('audioCanvas').style.display = 'none';
        }

        // Scroll to section
        function scrollToSection(sectionId) {
            document.getElementById(sectionId).scrollIntoView({ behavior: 'smooth' });
            
            // Update active menu item
            const menuItems = document.querySelectorAll('.menu-item');
            menuItems.forEach(item => item.classList.remove('active'));
            event.target.classList.add('active');
        }
    </script>
</body>
</html> 