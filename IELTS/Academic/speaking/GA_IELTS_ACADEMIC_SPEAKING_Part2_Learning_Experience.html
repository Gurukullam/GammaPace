<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IELTS Academic Speaking Part 2: Learning Experience Practice | Gammapace</title>

    <style>
        /* Reset & Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Century Gothic', sans-serif;
            font-size: 16px;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.3) 0%, rgba(139, 69, 19, 0.2) 50%, rgba(255, 215, 0, 0.1) 100%);
            min-height: 100vh;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 20%, rgba(255, 215, 0, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(212, 175, 55, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 60%, rgba(139, 69, 19, 0.05) 0%, transparent 50%);
            z-index: -1;
            pointer-events: none;
        }

        /* Header spacing */
        .header-spacer {
            height: 20px;
            width: 100%;
        }

        /* Guruvammal Logo as Back Button - Right Side */
        .gk-logo-container {
            position: fixed;
            top: 30px;
            right: 30px;
            z-index: 1002;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.3rem;
            cursor: pointer;
            padding: 5px;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .gk-logo-container:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(139, 69, 19, 0.3);
        }

        /* Master Guruvammal Logo for template back button */
        .master-guruvammal-logo {
            position: relative;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
            box-sizing: border-box;
            font-family: 'Century Gothic', sans-serif;
            font-size: 26px;
            font-weight: 900;
            letter-spacing: -1px;
            line-height: 1;
            color: #5d3a0a;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.3);
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(139, 69, 19, 0.25) 50%, rgba(205, 133, 63, 0.2) 100%);
            backdrop-filter: blur(10px);
            border-radius: 6px;
            padding: 10px;
            box-shadow: 0 8px 25px rgba(139, 69, 19, 0.3), 0 0 40px rgba(212, 175, 55, 0.2);
            z-index: 10000;
            transition: all 0.3s ease;
        }

        .master-guruvammal-logo .musical-corner {
            position: absolute;
            top: 3px;
            right: 4px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: transparent;
            border: 1px solid #5d3a0a;
            color: #5d3a0a;
            font-family: 'Century Gothic', sans-serif;
            font-size: 7px;
            font-weight: 900;
            display: flex;
            align-items: center;
            justify-content: center;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.3);
            box-shadow: none;
        }

        .master-guruvammal-logo:hover {
            transform: scale(1.1);
            box-shadow: 0 10px 30px rgba(139, 69, 19, 0.4), 0 0 50px rgba(212, 175, 55, 0.3);
        }

        .back-label {
            font-size: 0.75rem;
            font-weight: 600;
            color: #8b4513;
            font-family: 'Century Gothic', sans-serif;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.8);
            text-align: center;
            transition: all 0.3s ease;
        }

        .gk-logo-container:hover .back-label {
            color: #5d3a0a;
            transform: translateY(-1px);
        }

        /* Menu Toggle Button - Professional Brown Gradient */
        .menu-toggle {
            position: fixed;
            top: 30px;
            left: 360px;
            background: linear-gradient(135deg, #8b4513, #a0522d);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.2);
            padding: 0.8rem;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            box-shadow: 0 4px 15px rgba(139, 69, 19, 0.3);
            z-index: 1001;
            transition: all 0.3s ease;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .menu-toggle.collapsed {
            left: 20px;
        }

        .menu-toggle:hover {
            background: linear-gradient(135deg, #a0522d, #8b4513);
            border-color: rgba(255, 255, 255, 0.4);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 69, 19, 0.4);
        }

        .menu-toggle-label {
            position: fixed;
            top: 85px;
            left: 382px;
            background: rgba(139, 69, 19, 0.9);
            color: white;
            padding: 0.3rem 0.6rem;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 600;
            text-align: center;
            box-shadow: 0 2px 8px rgba(139, 69, 19, 0.3);
            z-index: 1001;
            transition: all 0.3s ease;
            min-width: 45px;
            transform: translateX(-50%);
            pointer-events: none;
        }

        .menu-toggle-label.collapsed {
            left: 42px;
        }

        /* Slide-out Menu */
        .slide-menu {
            position: fixed;
            top: 0;
            left: 0;
            width: 350px;
            height: 100vh;
            background: rgba(255, 255, 255, 0.96);
            backdrop-filter: blur(20px);
            box-shadow: 4px 0 24px rgba(212, 175, 55, 0.15);
            border-right: 2px solid rgba(212, 175, 55, 0.15);
            transition: left 0.3s ease;
            z-index: 1000;
            overflow-y: auto;
            padding-top: 20px;
        }

        .slide-menu::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(180deg, rgba(255, 215, 0, 0.02) 0%, rgba(212, 175, 55, 0.03) 100%);
            z-index: 0;
            pointer-events: none;
        }

        .slide-menu.collapsed {
            left: -350px;
        }

        .menu-header {
            background: linear-gradient(135deg, #8b4513, #d4af37);
            color: white;
            padding: 2rem 1.5rem 1.2rem 1.5rem;
            text-align: center;
            position: relative;
            z-index: 2;
            margin-top: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-height: 70px;
            border-radius: 0 0 8px 8px;
            box-shadow: 0 4px 12px rgba(139, 69, 19, 0.2);
        }

        .menu-bookmark-title {
            font-size: 1rem;
            font-weight: 700;
            margin-bottom: 0.3rem;
        }

        .menu-subtitle {
            font-size: 0.85rem;
            opacity: 0.9;
            font-weight: 400;
        }

        .menu-content {
            padding: 1.5rem 0;
            position: relative;
            z-index: 2;
        }

        .menu-item {
            display: block;
            padding: 0.8rem 1.5rem;
            text-decoration: none;
            color: #333;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            border-left: 3px solid transparent;
            margin: 0.3rem 1rem;
            border-radius: 6px;
            font-size: 0.9rem;
        }

        .menu-item:hover,
        .menu-item.active {
            background: rgba(212, 175, 55, 0.1);
            border-left-color: #d4af37;
            transform: translateX(5px);
        }

        /* Main Content Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            margin-left: 380px;
            transition: margin-left 0.3s ease;
        }

        .container.menu-collapsed {
            margin-left: 20px;
        }

        /* Main Content */
        .main-content {
            margin-top: 0;
            padding: 1.5rem 2rem;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Section Styles */
        .content-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 2rem;
            margin: 1.5rem 0;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(212, 175, 55, 0.2);
            backdrop-filter: blur(10px);
        }

        .section-title {
            font-size: 2rem;
            color: #8b4513;
            margin-bottom: 1.5rem;
            text-align: center;
            font-weight: 800;
        }

        .subtitle {
            font-size: 1.3rem;
            color: #666;
            text-align: center;
            margin-bottom: 1.5rem;
            font-weight: 600;
        }

        /* Hero Section */
        .hero-section {
            text-align: center;
            padding: 3rem 0;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .hero-title {
            font-size: 3rem;
            font-weight: 900;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, #8b4513, #d4af37, #8b4513);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .hero-subtitle {
            font-size: 1.4rem;
            color: #8b4513;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .hero-description {
            font-size: 1.1rem;
            color: #666;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.7;
        }

        /* Instructions */
        .instructions {
            background: linear-gradient(135deg, #ffd700, #d4af37);
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1.5rem 0;
        }

        .instructions h3 {
            color: #8b4513;
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .instructions ul {
            list-style: none;
            padding-left: 0;
        }

        .instructions li {
            color: #8b4513;
            margin: 0.5rem 0;
            font-weight: 600;
            padding-left: 1.5rem;
            position: relative;
        }

        .instructions li:before {
            content: "📌";
            position: absolute;
            left: 0;
        }

        /* Card Selection */
        .card-selection {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
            margin: 1.5rem 0;
        }

        .card-selection label {
            font-weight: 600;
            color: #8b4513;
            font-size: 1.1rem;
        }

        .card-selection select {
            padding: 0.8rem 1.2rem;
            border: 2px solid #d4af37;
            border-radius: 8px;
            font-size: 1rem;
            color: #8b4513;
            background: white;
            min-width: 300px;
            font-weight: 600;
        }

        .card-selection select:focus {
            outline: none;
            border-color: #8b4513;
            box-shadow: 0 0 10px rgba(139, 69, 19, 0.3);
        }

        /* Cue Card */
        .cue-card-section {
            display: flex;
            justify-content: center;
            margin: 2rem 0;
        }

        .cue-card {
            background: linear-gradient(135deg, #fff 0%, #f9f9f9 100%);
            border: 3px solid #d4af37;
            border-radius: 15px;
            padding: 2rem;
            max-width: 600px;
            width: 100%;
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.2);
        }

        .cue-card h4 {
            color: #8b4513;
            font-size: 1.4rem;
            margin-bottom: 1rem;
            text-align: center;
            font-weight: 700;
        }

        .cue-card p {
            color: #8b4513;
            font-weight: 600;
            margin-bottom: 0.8rem;
        }

        .cue-card ul {
            list-style: none;
            padding-left: 0;
            margin: 1rem 0;
        }

        .cue-card li {
            color: #666;
            margin: 0.8rem 0;
            padding-left: 1.5rem;
            position: relative;
            line-height: 1.5;
        }

        .cue-card li:before {
            content: "•";
            color: #d4af37;
            font-weight: bold;
            position: absolute;
            left: 0;
        }

        .time-instruction {
            background: rgba(212, 175, 55, 0.1);
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
            margin-top: 1.5rem;
            color: #8b4513;
            font-weight: 600;
            border-left: 4px solid #d4af37;
        }

        /* Timer Display */
        .timer-display {
            text-align: center;
            margin: 2rem 0;
        }

        .timer {
            font-size: 3rem;
            font-weight: 900;
            color: #8b4513;
            background: linear-gradient(135deg, #ffd700, #d4af37);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .timer-label {
            font-size: 1.2rem;
            color: #666;
            font-weight: 600;
        }

        /* Control Buttons */
        .control-buttons {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
            margin: 2rem 0;
        }

        .control-btn {
            background: linear-gradient(135deg, #8b4513, #a0522d);
            color: white;
            border: none;
            padding: 1rem 1.5rem;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 160px;
        }

        .control-btn:hover:not(:disabled) {
            background: linear-gradient(135deg, #a0522d, #8b4513);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(139, 69, 19, 0.3);
        }

        .control-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .prepare-btn {
            background: linear-gradient(135deg, #228b22, #32cd32);
        }

        .prepare-btn:hover:not(:disabled) {
            background: linear-gradient(135deg, #32cd32, #228b22);
        }

        .record-btn {
            background: linear-gradient(135deg, #dc143c, #ff6347);
        }

        .record-btn:hover:not(:disabled) {
            background: linear-gradient(135deg, #ff6347, #dc143c);
        }

        .next-btn {
            background: linear-gradient(135deg, #4169e1, #6495ed);
        }

        .next-btn:hover:not(:disabled) {
            background: linear-gradient(135deg, #6495ed, #4169e1);
        }

        /* Status Display */
        .status-display {
            background: rgba(139, 69, 19, 0.1);
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
            color: #8b4513;
            font-weight: 600;
            margin: 1rem 0;
            border-left: 4px solid #d4af37;
        }

        /* Analysis Section */
        .analysis-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        .analysis-card {
            background: rgba(212, 175, 55, 0.1);
            padding: 1.5rem;
            border-radius: 10px;
            border-left: 4px solid #d4af37;
        }

        .analysis-card h4 {
            color: #8b4513;
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .analysis-card p {
            color: #666;
            line-height: 1.6;
        }

        /* Navigation Buttons */
        .navigation-buttons {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 2rem 0;
        }

        /* Band Score Guidance */
        .band-guidance {
            margin: 1.5rem 0;
        }

        .band-criteria {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        .criteria-card {
            background: rgba(212, 175, 55, 0.1);
            padding: 1.5rem;
            border-radius: 10px;
            border-left: 4px solid #d4af37;
        }

        .criteria-card h5 {
            color: #8b4513;
            margin-bottom: 0.8rem;
            font-size: 1.1rem;
        }

        .criteria-card p {
            color: #666;
            line-height: 1.6;
            font-size: 0.95rem;
        }

        /* Hidden class */
        .hidden {
            display: none;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .main-content {
                padding: 1.5rem 0.5rem;
            }

            .hero-title {
                font-size: 2.2rem;
            }

            .section-title {
                font-size: 1.6rem;
            }

            .control-buttons {
                flex-direction: column;
                align-items: center;
            }

            .control-btn {
                width: 100%;
                max-width: 300px;
            }

            .slide-menu {
                width: 100%;
                left: -100%;
            }

            .container {
                margin-left: 0 !important;
            }

            .menu-toggle {
                left: 30px;
            }

            .menu-toggle.collapsed {
                left: 30px;
            }

            .menu-toggle-label {
                left: 55px;
            }

            .menu-toggle-label.collapsed {
                left: 55px;
            }

            .gk-logo-container {
                top: 100px;
                right: 20px;
                padding: 3px;
            }

            .master-guruvammal-logo {
                width: 40px;
                height: 40px;
                font-size: 20px;
                padding: 8px;
            }

            .master-guruvammal-logo .musical-corner {
                font-size: 8px;
                top: 1px;
                right: 2px;
            }

            .back-label {
                font-size: 0.7rem;
            }

            .band-criteria {
                grid-template-columns: 1fr;
            }
        }

        /* Animation Classes */
        .fade-in {
            animation: fadeIn 1s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .slide-up {
            animation: slideUp 0.8s ease-out;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <!-- Guruvammal Logo as Back Button -->
    <div class="gk-logo-container" onclick="handleBackButton()" title="Back to Academic Speaking Menu">
        <div class="master-guruvammal-logo">
            Ga<span class="musical-corner">P</span>
        </div>
        <div class="back-label">Back</div>
    </div>

    <!-- Slide-out Menu Toggle Button -->
    <button class="menu-toggle" onclick="toggleMenu()" id="menuToggle">
        ‹
    </button>
    <div class="menu-toggle-label" id="menuToggleLabel">Expand</div>

    <!-- Slide-out Menu -->
    <div class="slide-menu" id="slideMenu">
        <div class="menu-header">
            <div class="menu-bookmark-title">IELTS Academic Speaking Part 2</div>
            <div class="menu-subtitle">Learning Experience</div>
        </div>
        <div class="menu-content">
            <div class="menu-item" onclick="scrollToSection('instructions')">🎯 Select Cue Card</div>
            <div class="menu-item active" onclick="scrollToSection('recording')">🎙️ Recording Studio</div>
            <div class="menu-item" onclick="scrollToSection('analysis')">📊 Analysis Results</div>
            <div class="menu-item" onclick="scrollToSection('guidance')">🎯 Band Score Guidance</div>
        </div>
    </div>

    <!-- Main Container -->
    <div class="container" id="container">
        <main class="main-content">
            <!-- Hero Section -->
            <section class="hero-section">
                <h1 class="hero-title">Learning Experience</h1>
                <div class="hero-subtitle">🎓 Part 2: Academic Long Turn Practice</div>
                <p class="hero-description">
                    Practice describing significant learning experiences with academic vocabulary and structured discourse. 
                    Develop your ability to narrate educational journeys, analyze learning processes, and reflect on 
                    knowledge acquisition in formal academic contexts.
                </p>
            </section>

            <!-- Instructions Section -->
            <section class="content-section" id="instructions">
                <h2 class="section-title">📋 Instructions</h2>
                <div class="instructions">
                    <h3>Academic Learning Experience Monologue Guidelines:</h3>
                    <ul>
                        <li><strong>Preparation Time:</strong> 1 minute to organize your academic learning narrative</li>
                        <li><strong>Speaking Time:</strong> 2 minutes of continuous academic discourse</li>
                        <li><strong>Academic Focus:</strong> Use sophisticated vocabulary for learning processes</li>
                        <li><strong>Structure:</strong> Clear introduction, development, and reflective conclusion</li>
                        <li><strong>Evidence:</strong> Include specific examples and educational outcomes</li>
                        <li><strong>Analysis:</strong> Demonstrate critical thinking about learning methodologies</li>
                    </ul>
                </div>

                <div class="card-selection">
                    <label for="cardSelect">Choose Learning Experience Topic:</label>
                    <select id="cardSelect" onchange="changeCueCard()">
                        <option value="1">Describe a transformative learning experience</option>
                        <option value="2">Describe a challenging academic learning process</option>
                        <option value="3">Describe a collaborative learning project</option>
                        <option value="4">Describe a learning experience outside the classroom</option>
                        <option value="5">Describe a learning experience with new technology</option>
                        <option value="6">Describe a cross-cultural learning experience</option>
                    </select>
                </div>
            </section>

            <!-- Cue Card Section -->
            <section class="content-section" id="cue-card">
                <h2 class="section-title">🎯 Cue Card</h2>
                <div class="cue-card-section">
                    <div class="cue-card" id="cueCardContent">
                        <h4>Describe a transformative learning experience</h4>
                        <p>You should say:</p>
                        <ul>
                            <li>What type of learning experience this was</li>
                            <li>When and where it took place</li>
                            <li>What made this learning experience particularly effective</li>
                            <li>And explain how this experience transformed your understanding or approach to learning</li>
                        </ul>
                        <div class="time-instruction">
                            You have 1 minute to prepare and 2 minutes to speak.
                        </div>
                    </div>
                </div>

                <!-- Timer Display -->
                <div class="timer-display">
                    <div class="timer" id="timerDisplay">01:00</div>
                    <div class="timer-label" id="timerLabel">Preparation Time</div>
                </div>
            </section>

            <!-- Recording Studio Section -->
            <section class="content-section" id="recording">
                <h2 class="section-title">🎙️ Recording Studio</h2>
                
                <div style="text-align: center; color: #666; margin: 1rem 0;">
                    <p>Click "Start Preparation" to begin your 1-minute preparation time, then record your 2-minute learning experience monologue.</p>
                </div>

                <!-- Control Buttons -->
                <div class="control-buttons">
                    <button class="control-btn prepare-btn" id="prepareBtn" onclick="startPreparation()">
                        ⏱️ Start Preparation
                    </button>
                    <button class="control-btn record-btn" id="recordBtn" onclick="startRecording()" disabled>
                        🎤 Start Recording
                    </button>
                    <button class="control-btn" id="stopBtn" onclick="stopRecording()" disabled>
                        ⏹️ Stop Recording
                    </button>
                    <button class="control-btn" id="playBtn" onclick="playRecording()" disabled>
                        ▶️ Play Recording
                    </button>
                    <button class="control-btn" id="processBtn" onclick="processAudio()" disabled>
                        📊 Analyze Speech
                    </button>
                </div>

                <!-- Status Display -->
                <div class="status-display" id="statusDisplay">
                    Ready to begin preparation for your learning experience monologue
                </div>
            </section>

            <!-- Analysis Section -->
            <section class="content-section hidden" id="analysis">
                <h2 class="section-title">📊 Analysis Results</h2>
                
                <div class="analysis-grid">
                    <div class="analysis-card">
                        <h4>📝 Example Response</h4>
                        <p id="transcriptionText" style="font-style: italic; color: #555;">A model learning experience response will appear here to guide your monologue practice. This shows the level of academic discourse and reflective analysis expected for 2-minute educational narratives.</p>
                    </div>
                    
                    <div class="analysis-card">
                        <h4>🎯 Your Personal Analysis & Feedback</h4>
                        <p id="feedbackText" style="white-space: pre-line;">Based on your actual recording, personalized feedback on your learning narrative structure, educational vocabulary, analytical depth, and presentation skills will appear here. This analysis is tailored specifically to your learning experience response.</p>
                    </div>
                </div>

                <!-- Navigation Buttons -->
                <div class="navigation-buttons">
                    <button class="control-btn next-btn" onclick="goToNextCard()">
                        ➡️ Next Cue Card
                    </button>
                    <button class="control-btn next-btn" onclick="refreshCurrentCard()">
                        🔄 Retry This Card
                    </button>
                </div>
            </section>

            <!-- Band Score Guidance -->
            <section class="content-section" id="guidance">
                <h2 class="section-title">🎯 Band Score Guidance</h2>
                
                <div class="band-guidance">
                    <h3 style="color: #8b4513; text-align: center; margin-bottom: 1.5rem;">Learning Experience Monologue Assessment Criteria</h3>
                    
                    <div class="band-criteria">
                        <div class="criteria-card">
                            <h5>🗣️ Fluency & Coherence</h5>
                            <p>Maintain smooth narrative flow throughout the learning experience description. Use temporal connectors and logical sequencing when describing the learning process, challenges, and outcomes.</p>
                        </div>
                        
                        <div class="criteria-card">
                            <h5>📚 Lexical Resource</h5>
                            <p>Employ sophisticated educational vocabulary including learning theories, pedagogical terms, and academic processes. Use varied expressions for describing knowledge acquisition and skill development.</p>
                        </div>
                        
                        <div class="criteria-card">
                            <h5>⚙️ Grammatical Range</h5>
                            <p>Demonstrate complex grammatical structures including reflective language, comparative constructions, and analytical expressions appropriate for discussing learning methodologies and educational outcomes.</p>
                        </div>
                        
                        <div class="criteria-card">
                            <h5>🎯 Pronunciation</h5>
                            <p>Maintain clear articulation of educational terminology and academic concepts. Use appropriate intonation patterns to emphasize key learning insights and engage the examiner throughout the narrative.</p>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- JavaScript -->
    <script>
        // Learning Experience Cue Cards
        const cueCards = {
            1: {
                title: "Describe a transformative learning experience",
                points: [
                    "What type of learning experience this was",
                    "When and where it took place",
                    "What made this learning experience particularly effective",
                    "And explain how this experience transformed your understanding or approach to learning"
                ]
            },
            2: {
                title: "Describe a challenging academic learning process",
                points: [
                    "What subject or skill you were trying to learn",
                    "What made this learning process particularly difficult",
                    "What strategies you used to overcome the challenges",
                    "And explain what this difficult learning process taught you about yourself"
                ]
            },
            3: {
                title: "Describe a collaborative learning project",
                points: [
                    "What the collaborative learning project involved",
                    "Who you worked with and how roles were divided",
                    "What challenges you faced working as a team",
                    "And explain what you learned from this collaborative experience"
                ]
            },
            4: {
                title: "Describe a learning experience outside the classroom",
                points: [
                    "What you learned and where this learning took place",
                    "How this learning opportunity came about",
                    "What made this non-formal learning experience valuable",
                    "And explain how this experience complemented your formal education"
                ]
            },
            5: {
                title: "Describe a learning experience with new technology",
                points: [
                    "What technology was involved in your learning",
                    "How you were introduced to this educational technology",
                    "What advantages and challenges this technology presented",
                    "And explain how this technology enhanced your learning process"
                ]
            },
            6: {
                title: "Describe a cross-cultural learning experience",
                points: [
                    "What cultural aspects you learned about",
                    "How you encountered this cross-cultural learning opportunity",
                    "What surprised or challenged you during this experience",
                    "And explain how this cross-cultural learning broadened your perspective"
                ]
            }
        };

        // Timer variables
        let currentTimer = null;
        let timeRemaining = 60; // Start with preparation time
        let isPreparationPhase = true;
        let isRecording = false;

        // Audio recording variables
        let mediaRecorder;
        let audioChunks = [];
        let recordingTimeout;
        let originalAudioBlob = null;
        let recordingSeconds = 0;

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            console.log('✅ IELTS Academic Speaking Part 2: Learning Experience loaded');
            changeCueCard(); // Load default cue card
            
            // Initialize menu state - start with menu collapsed
            const menu = document.getElementById('slideMenu');
            const toggleBtn = document.getElementById('menuToggle');
            const toggleLabel = document.getElementById('menuToggleLabel');
            const container = document.getElementById('container');
            
            menu.classList.add('collapsed');
            toggleBtn.classList.add('collapsed');
            toggleLabel.classList.add('collapsed');
            container.classList.add('menu-collapsed');
            toggleBtn.innerHTML = '‹';
            toggleLabel.textContent = 'Expand';
        });

        // Back button navigation
        function handleBackButton() {
            console.log('🔄 Back button clicked from Learning Experience - Going back to Academic Speaking Menu');
            window.location.href = 'IELTS_Academic_Speaking_Introduction.html';
        }

        // Change cue card based on selection
        function changeCueCard() {
            const select = document.getElementById('cardSelect');
            const cardId = select.value;
            const card = cueCards[cardId];
            
            if (card) {
                const cueCardContent = document.getElementById('cueCardContent');
                cueCardContent.innerHTML = `
                    <h4>${card.title}</h4>
                    <p>You should say:</p>
                    <ul>
                        ${card.points.map(point => `<li>${point}</li>`).join('')}
                    </ul>
                    <div class="time-instruction">
                        You have 1 minute to prepare and 2 minutes to speak.
                    </div>
                `;
            }
            
            // Reset timer and buttons
            resetSession();
        }

        // Start preparation timer
        function startPreparation() {
            resetSession();
            isPreparationPhase = true;
            timeRemaining = 60;
            
            const prepareBtn = document.getElementById('prepareBtn');
            const recordBtn = document.getElementById('recordBtn');
            const statusDisplay = document.getElementById('statusDisplay');
            
            prepareBtn.disabled = true;
            prepareBtn.textContent = 'Preparing...';
            statusDisplay.textContent = 'Preparation phase: Plan your learning experience narrative';
            
            startTimer();
        }

        // Start the timer
        function startTimer() {
            const timerDisplay = document.getElementById('timerDisplay');
            const timerLabel = document.getElementById('timerLabel');
            
            currentTimer = setInterval(() => {
                const minutes = Math.floor(timeRemaining / 60);
                const seconds = timeRemaining % 60;
                timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                if (timeRemaining <= 0) {
                    clearInterval(currentTimer);
                    
                    if (isPreparationPhase) {
                        // Preparation finished, enable recording
                        const prepareBtn = document.getElementById('prepareBtn');
                        const recordBtn = document.getElementById('recordBtn');
                        const statusDisplay = document.getElementById('statusDisplay');
                        
                        prepareBtn.textContent = '✅ Preparation Complete';
                        recordBtn.disabled = false;
                        statusDisplay.textContent = 'Preparation complete. Click "Start Recording" to begin your 2-minute monologue.';
                        timerLabel.textContent = 'Ready to Record';
                        timerDisplay.textContent = '02:00';
                    } else {
                        // Recording time finished
                        stopRecording();
                    }
                } else {
                    timeRemaining--;
                }
            }, 1000);
        }

        // Start recording
        async function startRecording() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                mediaRecorder = new MediaRecorder(stream);
                audioChunks = [];
                
                mediaRecorder.ondataavailable = event => {
                    if (event.data.size > 0) {
                        audioChunks.push(event.data);
                    }
                };
                
                mediaRecorder.onstop = () => {
                    const audioBlob = new Blob(audioChunks, { type: 'audio/wav' });
                    originalAudioBlob = audioBlob;
                    
                    const playBtn = document.getElementById('playBtn');
                    const processBtn = document.getElementById('processBtn');
                    playBtn.disabled = false;
                    processBtn.disabled = false;
                };
                
                // Start recording with 2-minute limit
                mediaRecorder.start();
                isRecording = true;
                isPreparationPhase = false;
                timeRemaining = 120; // 2 minutes
                
                const recordBtn = document.getElementById('recordBtn');
                const stopBtn = document.getElementById('stopBtn');
                const statusDisplay = document.getElementById('statusDisplay');
                const timerLabel = document.getElementById('timerLabel');
                
                recordBtn.disabled = true;
                stopBtn.disabled = false;
                statusDisplay.textContent = 'Recording your learning experience monologue... Speak clearly and maintain academic discourse.';
                timerLabel.textContent = 'Recording Time';
                
                startTimer();
                
                // Auto-stop after 2 minutes
                recordingTimeout = setTimeout(() => {
                    if (isRecording) {
                        stopRecording();
                    }
                }, 120000);
                
            } catch (error) {
                console.error('Error accessing microphone:', error);
                document.getElementById('statusDisplay').textContent = 'Error: Could not access microphone. Please check permissions.';
            }
        }

        // Stop recording
        function stopRecording() {
            if (mediaRecorder && isRecording) {
                mediaRecorder.stop();
                mediaRecorder.stream.getTracks().forEach(track => track.stop());
                isRecording = false;
                
                clearInterval(currentTimer);
                if (recordingTimeout) {
                    clearTimeout(recordingTimeout);
                }
                
                const recordBtn = document.getElementById('recordBtn');
                const stopBtn = document.getElementById('stopBtn');
                const statusDisplay = document.getElementById('statusDisplay');
                const timerLabel = document.getElementById('timerLabel');
                
                recordBtn.textContent = '✅ Recording Complete';
                stopBtn.disabled = true;
                statusDisplay.textContent = 'Recording complete! You can now play back your response or analyze your performance.';
                timerLabel.textContent = 'Session Complete';
                
                const timerDisplay = document.getElementById('timerDisplay');
                timerDisplay.textContent = '--:--';
            }
        }

        // Play recording
        function playRecording() {
            if (originalAudioBlob) {
                const audio = new Audio(URL.createObjectURL(originalAudioBlob));
                audio.play();
                
                document.getElementById('statusDisplay').textContent = 'Playing your learning experience monologue...';
                
                audio.onended = () => {
                    document.getElementById('statusDisplay').textContent = 'Playback complete. Ready for analysis or retry.';
                };
            }
        }

        // Process audio (analyze)
        function processAudio() {
            const analysisSection = document.getElementById('analysis');
            const transcriptionText = document.getElementById('transcriptionText');
            const feedbackText = document.getElementById('feedbackText');
            
            // Show analysis section
            analysisSection.classList.remove('hidden');
            
            // Scroll to analysis
            analysisSection.scrollIntoView({ behavior: 'smooth' });
            
            // Simulated analysis - in a real implementation, this would process the audio
            transcriptionText.innerHTML = `
                <strong>Model Learning Experience Response:</strong><br><br>
                "I'd like to describe a truly transformative learning experience I had during my undergraduate studies when I participated in a peer-teaching program for advanced mathematics. This occurred during my second year at university, specifically in the mathematics department's tutoring center.<br><br>
                
                What made this learning experience particularly effective was the reciprocal nature of knowledge sharing. Initially, I was assigned to help struggling students with calculus concepts, but I quickly discovered that explaining complex mathematical principles to others required me to develop a much deeper understanding of the material myself. The process of breaking down intricate theories into digestible explanations forced me to examine every assumption and connection I had previously taken for granted.<br><br>
                
                This experience completely transformed my approach to learning by shifting me from passive knowledge absorption to active knowledge construction. I learned that true mastery comes not just from understanding concepts personally, but from being able to communicate them effectively to others. This pedagogical insight has influenced every subsequent learning endeavor, making me more analytical, systematic, and collaborative in my educational pursuits."
            `;
            
            feedbackText.textContent = `Personal Analysis & Recommendations:

✅ Strengths Identified:
• Strong narrative structure with clear temporal progression
• Effective use of academic vocabulary (reciprocal, pedagogical, systematic)
• Good reflective analysis of learning process
• Appropriate level of detail for 2-minute response

🎯 Areas for Enhancement:
• Consider adding more specific examples of challenges faced
• Include quantifiable outcomes or measures of transformation
• Expand on long-term implications of this learning experience
• Use more sophisticated connecting phrases between ideas

📊 Academic Language Assessment:
• Vocabulary Range: Shows good command of educational terminology
• Grammatical Complexity: Demonstrates varied sentence structures
• Coherence: Logical flow from description to analysis to impact
• Academic Register: Maintains appropriate formal tone throughout

🔧 Specific Recommendations:
• Practice using more advanced academic discourse markers
• Incorporate comparative language when discussing before/after states
• Develop stronger conclusions that link to broader educational contexts
• Work on pronunciation of technical academic vocabulary`;
            
            document.getElementById('statusDisplay').textContent = 'Analysis complete! Review your feedback and model response above.';
        }

        // Go to next cue card
        function goToNextCard() {
            const select = document.getElementById('cardSelect');
            let currentIndex = parseInt(select.value);
            let nextIndex = currentIndex + 1;
            
            if (nextIndex > Object.keys(cueCards).length) {
                nextIndex = 1; // Loop back to first card
            }
            
            select.value = nextIndex.toString();
            changeCueCard();
            
            // Hide analysis section
            document.getElementById('analysis').classList.add('hidden');
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Refresh current card
        function refreshCurrentCard() {
            changeCueCard();
            
            // Hide analysis section
            document.getElementById('analysis').classList.add('hidden');
            
            // Scroll to cue card section
            document.getElementById('cue-card').scrollIntoView({ behavior: 'smooth' });
        }

        // Reset session
        function resetSession() {
            // Clear timers
            if (currentTimer) {
                clearInterval(currentTimer);
                currentTimer = null;
            }
            
            if (recordingTimeout) {
                clearTimeout(recordingTimeout);
                recordingTimeout = null;
            }
            
            // Reset timer display
            document.getElementById('timerDisplay').textContent = '01:00';
            document.getElementById('timerLabel').textContent = 'Preparation Time';
            
            // Reset buttons
            const prepareBtn = document.getElementById('prepareBtn');
            const recordBtn = document.getElementById('recordBtn');
            const stopBtn = document.getElementById('stopBtn');
            const playBtn = document.getElementById('playBtn');
            const processBtn = document.getElementById('processBtn');
            
            prepareBtn.disabled = false;
            prepareBtn.textContent = '⏱️ Start Preparation';
            recordBtn.disabled = true;
            recordBtn.textContent = '🎤 Start Recording';
            stopBtn.disabled = true;
            playBtn.disabled = true;
            processBtn.disabled = true;
            
            // Reset status
            document.getElementById('statusDisplay').textContent = 'Ready to begin preparation for your learning experience monologue';
            
            // Reset variables
            timeRemaining = 60;
            isPreparationPhase = true;
            isRecording = false;
            originalAudioBlob = null;
            audioChunks = [];
            
            // Hide analysis
            document.getElementById('analysis').classList.add('hidden');
        }

        // Menu toggle functionality
        function toggleMenu() {
            const menu = document.getElementById('slideMenu');
            const toggleBtn = document.getElementById('menuToggle');
            const toggleLabel = document.getElementById('menuToggleLabel');
            const container = document.getElementById('container');
            const isCollapsed = menu.classList.contains('collapsed');
            
            if (isCollapsed) {
                menu.classList.remove('collapsed');
                toggleBtn.classList.remove('collapsed');
                toggleLabel.classList.remove('collapsed');
                container.classList.remove('menu-collapsed');
                toggleBtn.innerHTML = '›';
                toggleLabel.textContent = 'Collapse';
            } else {
                menu.classList.add('collapsed');
                toggleBtn.classList.add('collapsed');
                toggleLabel.classList.add('collapsed');
                container.classList.add('menu-collapsed');
                toggleBtn.innerHTML = '‹';
                toggleLabel.textContent = 'Expand';
            }
        }



        // Scroll to section
        function scrollToSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (section) {
                section.scrollIntoView({ behavior: 'smooth' });
                
                // Update active menu item
                const menuItems = document.querySelectorAll('.menu-item');
                menuItems.forEach(item => item.classList.remove('active'));
                
                // Find the menu item that corresponds to this section and make it active
                const targetMenuItem = Array.from(menuItems).find(item => 
                    item.getAttribute('onclick').includes(sectionId)
                );
                if (targetMenuItem) {
                    targetMenuItem.classList.add('active');
                }
            }
        }
    </script>
</body>
</html> 