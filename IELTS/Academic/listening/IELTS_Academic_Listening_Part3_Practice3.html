<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IELTS Academic Listening Part 3 - Practice 3: Literature Research Planning</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.3) 0%, rgba(139, 69, 19, 0.2) 50%, rgba(255, 215, 0, 0.1) 100%);
            min-height: 100vh;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 20%, rgba(255, 215, 0, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(212, 175, 55, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 60%, rgba(139, 69, 19, 0.05) 0%, transparent 50%);
            z-index: -1;
            pointer-events: none;
        }

        /* Header spacing */
        .header-spacer {
            height: 20px;
            width: 100%;
        }

        /* Guruvammal Logo as Back Button */
        .gk-logo-container {
            position: fixed;
            top: 30px;
            right: 30px;
            z-index: 1002;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.3rem;
            cursor: pointer;
            padding: 5px;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .gk-logo-container:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(139, 69, 19, 0.3);
        }

        .master-guruvammal-logo {
            position: relative;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
            box-sizing: border-box;
            font-family: 'Century Gothic', sans-serif;
            font-size: 26px;
            font-weight: 900;
            letter-spacing: -1px;
            line-height: 1;
            color: #5d3a0a;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.3);
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(139, 69, 19, 0.25) 50%, rgba(205, 133, 63, 0.2) 100%);
            backdrop-filter: blur(10px);
            border-radius: 6px;
            padding: 10px;
            box-shadow: 0 8px 25px rgba(139, 69, 19, 0.3), 0 0 40px rgba(212, 175, 55, 0.2);
            z-index: 10000;
            transition: all 0.3s ease;
        }

        .master-guruvammal-logo .musical-corner {
            position: absolute;
            top: 2px;
            right: 3px;
            font-size: 10px;
            color: #5d3a0a;
            font-weight: 900;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.3);
        }

        .master-guruvammal-logo:hover {
            transform: scale(1.1);
            box-shadow: 0 10px 30px rgba(139, 69, 19, 0.4), 0 0 50px rgba(212, 175, 55, 0.3);
        }

        .back-label {
            font-size: 0.75rem;
            font-weight: 600;
            color: #5d3a0a;
            font-family: 'Century Gothic', sans-serif;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.8);
            text-align: center;
            transition: all 0.3s ease;
        }

        .gk-logo-container:hover .back-label {
            color: #3a2006;
            transform: translateY(-1px);
        }

        /* Container with menu support */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            margin-left: 360px;
            transition: margin-left 0.3s ease;
        }

        .container.menu-collapsed {
            margin-left: 20px;
        }

        /* Main Content */
        .main-content {
            margin-top: 0;
            padding: 1.5rem 2rem;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Professional Slide-out Menu */
        .slide-menu {
            position: fixed;
            left: 0;
            top: 0;
            width: 340px;
            height: 100vh;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(248, 249, 250, 0.95) 100%);
            backdrop-filter: blur(20px);
            border-right: 3px solid rgba(70, 130, 180, 0.3);
            box-shadow: 8px 0 30px rgba(25, 25, 112, 0.15);
            z-index: 1000;
            overflow-y: auto;
            transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            transform: translateX(0);
        }

        .slide-menu.collapsed {
            transform: translateX(-340px);
        }

        .menu-header {
            background: linear-gradient(135deg, #8b4513, #d4af37);
            color: white;
            padding: 2rem 1.5rem 1.5rem;
            border-bottom: 2px solid rgba(139, 69, 19, 0.3);
            position: relative;
            overflow: hidden;
        }

        .menu-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 20%, rgba(212, 175, 55, 0.1) 0%, transparent 40%),
                radial-gradient(circle at 80% 80%, rgba(255, 215, 0, 0.15) 0%, transparent 40%);
            pointer-events: none;
        }

        .menu-title {
            font-size: 1.4rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            position: relative;
            z-index: 1;
        }

        .menu-subtitle {
            font-size: 0.9rem;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        .menu-content {
            padding: 1.5rem 0;
        }

        .menu-item {
            display: block;
            padding: 1rem 1.5rem;
            text-decoration: none;
            color: #333;
            border-bottom: 1px solid rgba(70, 130, 180, 0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .menu-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(135deg, #d4af37, #8b4513);
            transform: scaleY(0);
            transition: transform 0.3s ease;
        }

        .menu-item:hover {
            background: rgba(212, 175, 55, 0.08);
            color: #8b4513;
            transform: translateX(8px);
        }

        .menu-item:hover::before {
            transform: scaleY(1);
        }

        .item-title {
            font-weight: 600;
            font-size: 1rem;
            margin-bottom: 0.2rem;
        }

        .item-description {
            font-size: 0.85rem;
            color: #666;
            line-height: 1.4;
        }

        /* Menu Toggle Button */
        .menu-toggle {
            position: fixed;
            top: 30px;
            left: 360px;
            background: linear-gradient(135deg, #8b4513, #a0522d);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.2rem;
            z-index: 1001;
            box-shadow: 0 4px 15px rgba(139, 69, 19, 0.3);
            transition: all 0.3s ease;
        }

        .menu-toggle:hover {
            background: linear-gradient(135deg, #a0522d, #8b4513);
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(139, 69, 19, 0.4);
        }

        .menu-toggle.collapsed {
            left: 30px;
        }

        /* Hero Section */
        .hero-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 3rem 2rem;
            text-align: center;
            margin-bottom: 3rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 30% 30%, rgba(70, 130, 180, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 70% 70%, rgba(25, 25, 112, 0.08) 0%, transparent 50%);
            pointer-events: none;
        }

        .hero-title {
            font-size: 2.8rem;
            font-weight: 900;
            color: #8b4513;
            margin-bottom: 1rem;
            position: relative;
            z-index: 1;
        }

        .hero-subtitle {
            font-size: 1.4rem;
            color: #666;
            margin-bottom: 1.5rem;
            position: relative;
            z-index: 1;
        }

        .hero-description {
            font-size: 1.1rem;
            color: #555;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.7;
            position: relative;
            z-index: 1;
        }

        .speakers-section {
            background: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border: 2px solid #d4af37;
        }

        .speakers-title {
            font-size: 1.5em;
            color: #5d3a0a;
            margin-bottom: 20px;
            text-align: center;
            font-weight: bold;
        }

        .speakers-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .speaker-card {
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.1), rgba(255, 215, 0, 0.05));
            padding: 20px;
            border-radius: 12px;
            border: 2px solid #d4af37;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .speaker-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.3);
        }

        .speaker-card.active {
            border-color: #8b4513;
            background: linear-gradient(135deg, rgba(139, 69, 19, 0.1), rgba(212, 175, 55, 0.1));
            transform: scale(1.02);
        }

        .speaker-name {
            font-size: 1.3em;
            font-weight: bold;
            color: #5d3a0a;
            margin-bottom: 8px;
        }

        .speaker-role {
            color: #8b4513;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .speaker-details {
            color: #666;
            font-size: 0.95em;
            line-height: 1.5;
        }

        .audio-section {
            background: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border: 2px solid #d4af37;
        }

        .audio-title {
            font-size: 1.4em;
            color: #5d3a0a;
            margin-bottom: 20px;
            text-align: center;
            font-weight: bold;
        }

        .conversation-context {
            background: rgba(255, 215, 0, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #d4af37;
        }

        /* Audio Player Styles */
        .play-btn {
            background: linear-gradient(135deg, #d4af37, #8b4513);
            color: white;
            border: none;
            padding: 1rem 2.5rem;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.2rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.4);
            margin-bottom: 1rem;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        .play-btn:hover:not(:disabled) {
            background: linear-gradient(135deg, #8b4513, #a0522d);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(212, 175, 55, 0.6);
        }

        .play-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .progress-container {
            background: rgba(139, 69, 19, 0.1);
            border-radius: 10px;
            padding: 0.5rem;
            margin-top: 1rem;
        }

        .progress-bar {
            background: #e0e0e0;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }

        .progress-fill {
            background: linear-gradient(90deg, #d4af37, #8b4513);
            height: 100%;
            width: 0%;
            transition: width 0.2s ease;
        }

        .time-display {
            text-align: center;
            font-size: 0.9rem;
            color: #8b4513;
            font-weight: 600;
        }

        .questions-section {
            background: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border: 2px solid #d4af37;
        }

        .questions-title {
            font-size: 1.5em;
            color: #5d3a0a;
            margin-bottom: 25px;
            text-align: center;
            font-weight: bold;
        }

        .question-group {
            margin-bottom: 35px;
            padding: 20px;
            background: rgba(255, 215, 0, 0.05);
            border-radius: 12px;
            border: 1px solid #d4af37;
        }

        .question-group-title {
            font-size: 1.2em;
            color: #8b4513;
            margin-bottom: 20px;
            font-weight: bold;
            text-align: center;
        }

        .question {
            margin-bottom: 25px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            border-left: 4px solid #d4af37;
        }

        .question-number {
            font-weight: bold;
            color: #5d3a0a;
            margin-bottom: 10px;
        }

        .question-text {
            margin-bottom: 15px;
            font-size: 1.05em;
            line-height: 1.6;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 10px;
            background: rgba(255, 215, 0, 0.05);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }

        .option:hover {
            background: rgba(212, 175, 55, 0.1);
            border-color: #d4af37;
        }

        .option input[type="radio"] {
            margin-right: 10px;
            accent-color: #d4af37;
        }

        .matching-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-top: 20px;
        }

        .matching-column {
            background: rgba(255, 215, 0, 0.05);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #d4af37;
        }

        .matching-title {
            font-weight: bold;
            color: #5d3a0a;
            margin-bottom: 15px;
            text-align: center;
        }

        .matching-item {
            padding: 12px;
            margin-bottom: 10px;
            background: white;
            border-radius: 6px;
            border: 1px solid #d4af37;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .matching-item:hover {
            background: rgba(212, 175, 55, 0.1);
            transform: translateX(5px);
        }

        .matching-item.selected {
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.2), rgba(255, 215, 0, 0.1));
            border-color: #8b4513;
        }

        .matching-answers {
            margin-top: 20px;
            padding: 20px;
            background: rgba(255, 215, 0, 0.05);
            border-radius: 10px;
            border: 1px solid #d4af37;
        }

        .answer-input {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            gap: 15px;
        }

        .answer-input label {
            font-weight: bold;
            color: #5d3a0a;
            min-width: 100px;
        }

        .answer-input select {
            padding: 8px;
            border: 2px solid #d4af37;
            border-radius: 6px;
            background: white;
            color: #333;
            font-size: 16px;
            min-width: 200px;
        }

        .submit-section {
            text-align: center;
            margin-top: 30px;
        }

        .submit-btn {
            background: linear-gradient(135deg, #8b4513, #5d3a0a);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .submit-btn:hover {
            background: linear-gradient(135deg, #5d3a0a, #3d250a);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(139, 69, 19, 0.4);
        }

        .results-section {
            background: white;
            padding: 25px;
            border-radius: 15px;
            margin-top: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border: 2px solid #d4af37;
            display: none;
        }

        .score-display {
            text-align: center;
            margin-bottom: 2rem;
            padding: 2rem;
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.1), rgba(255, 215, 0, 0.05));
            border-radius: 15px;
            border: 2px solid #d4af37;
        }

        .score-number {
            font-size: 3rem;
            font-weight: bold;
            color: #8b4513;
            margin-bottom: 0.5rem;
        }

        .score-text {
            font-size: 1.2rem;
            color: #666;
            margin-top: 0.5rem;
        }

        .answer-review {
            margin-bottom: 2rem;
        }

        .review-item {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            border-left: 4px solid;
        }

        .review-item.correct {
            border-left-color: #28a745;
            background: rgba(40, 167, 69, 0.1);
        }

        .review-item.incorrect {
            border-left-color: #dc3545;
            background: rgba(220, 53, 69, 0.1);
        }

        .improvement-tips {
            background: rgba(212, 175, 55, 0.1);
            border-radius: 10px;
            padding: 1.5rem;
            border: 2px solid rgba(212, 175, 55, 0.3);
        }

        .improvement-tips h4 {
            color: #8b4513;
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .improvement-tips ul {
            list-style: none;
            padding: 0;
        }

        .improvement-tips li {
            margin-bottom: 0.8rem;
            padding-left: 1.5rem;
            position: relative;
        }

        .improvement-tips li::before {
            content: '🎓';
            position: absolute;
            left: 0;
            top: 0;
        }

        /* Section Styles */
        .content-section {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 2.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            border-left: 5px solid #d4af37;
        }

        .section-title {
            color: #8b4513;
            font-size: 2rem;
            margin-bottom: 1.5rem;
            text-align: center;
            border-bottom: 3px solid #d4af37;
            padding-bottom: 0.5rem;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                margin-left: 20px;
            }

            .slide-menu {
                width: 100%;
                transform: translateX(-100%);
            }

            .slide-menu.active {
                transform: translateX(0);
            }

            .menu-toggle {
                left: 30px;
            }

            .hero-title {
                font-size: 2rem;
            }

            .main-content {
                padding: 1rem;
            }

            .content-section {
                padding: 1.5rem;
            }

            .speakers-container {
                grid-template-columns: 1fr;
            }

            .matching-container {
                grid-template-columns: 1fr;
            }

            .play-btn {
                width: 90%;
                font-size: 1rem;
                padding: 0.8rem 1.5rem;
            }

            .answer-input {
                flex-direction: column;
                align-items: stretch;
                gap: 10px;
            }

            .answer-input label {
                min-width: auto;
            }

            .answer-input select {
                min-width: auto;
            }
        }

        /* Smooth Scrolling */
        html {
            scroll-behavior: smooth;
        }

        /* Selection Styles */
        ::selection {
            background: rgba(212, 175, 55, 0.3);
            color: #8b4513;
        }
    </style>
</head>
<body>
    <div class="header-spacer"></div>

    <!-- Guruvammal Logo as Back Button -->
    <div class="gk-logo-container" onclick="handleBackButton()">
        <div class="master-guruvammal-logo">
            Ga<span class="musical-corner">♪</span>
        </div>
        <div class="back-label">Back</div>
    </div>

    <!-- Professional Slide-out Menu -->
    <div class="slide-menu" id="slideMenu">
        <div class="menu-header">
            <div class="menu-title">🎓 IELTS Academic Listening</div>
            <div class="menu-subtitle">Part 3 - Practice 3</div>
        </div>
        <div class="menu-content">
            <a href="#speakers" class="menu-item" onclick="navigateToSection('speakers')">
                <div class="item-title">1. Academic Speakers</div>
                <div class="item-description">👥 Literature Department Conversation Participants</div>
            </a>
            <a href="#audio-section" class="menu-item" onclick="navigateToSection('audio-section')">
                <div class="item-title">2. Academic Conversation</div>
                <div class="item-description">🎧 PhD Thesis Supervision Meeting (5 min)</div>
            </a>
            <a href="#questions" class="menu-item" onclick="navigateToSection('questions')">
                <div class="item-title">3. Questions (Part 3)</div>
                <div class="item-description">📝 Multiple Choice + Matching Questions</div>
            </a>
            <a href="#results" class="menu-item" onclick="navigateToSection('results')">
                <div class="item-title">4. Results & Analysis</div>
                <div class="item-description">📊 Academic Performance & Feedback</div>
            </a>
        </div>
    </div>

    <!-- Menu Toggle Button -->
    <div class="menu-toggle" id="menuToggle" onclick="toggleMenu()">
        <span id="menuIcon">📋</span>
    </div>

    <!-- Main Container -->
    <div class="container" id="container">
        <main class="main-content">
            <!-- Hero Section -->
            <section class="hero-section">
                <h1 class="hero-title">🎓 IELTS Academic Listening - Part 3 (Practice 3)</h1>
                <div class="hero-subtitle">
                    Literature Department Research Planning
                </div>
                <p class="hero-description">
                    Listen to Professor David Wright and PhD candidate Anna Rodriguez discussing thesis research planning in Victorian literature. This academic conversation covers research methodology, theoretical frameworks, and thesis structure planning. Complete multiple choice and matching questions about their academic discussion. This practice covers Questions 21-30.
                </p>
            </section>

        <section id="speakers" class="content-section">
            <h2 class="section-title">👥 Academic Conversation Participants</h2>
            <div class="speakers-container">
                <div class="speaker-card" id="speaker1">
                    <div class="speaker-name">Professor David Wright</div>
                    <div class="speaker-role">Primary Thesis Supervisor | Literature Department</div>
                    <div class="speaker-details">
                        <strong>Accent:</strong> British English<br>
                        <strong>Specialization:</strong> Victorian Literature, 19th Century Studies<br>
                        <strong>Experience:</strong> 25+ years in literary research and supervision<br>
                        <strong>Research Focus:</strong> Victorian social novels, literary theory
                    </div>
                </div>
                <div class="speaker-card" id="speaker2">
                    <div class="speaker-name">Anna Rodriguez</div>
                    <div class="speaker-role">PhD Candidate | Literature Department</div>
                    <div class="speaker-details">
                        <strong>Accent:</strong> American English<br>
                        <strong>Research Topic:</strong> Women's Agency in Victorian Literature<br>
                        <strong>Academic Year:</strong> Second year PhD student<br>
                        <strong>Background:</strong> Masters in English Literature, University of California
                    </div>
                </div>
            </div>
        </section>

        <section id="audio-section" class="content-section">
            <h2 class="section-title">🎧 Academic Conversation Audio</h2>
            <div class="conversation-context">
                <strong>Academic Context:</strong> PhD thesis supervision meeting discussing research methodology, literature review scope, and theoretical framework for a thesis on women's agency in Victorian literature. The conversation covers primary source selection, critical theory application, and thesis structure planning.
            </div>
            
            <button class="play-btn" onclick="playAudio()" id="playBtn">
                ▶️ Play
            </button>
            
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="time-display">
                    <span id="currentTime">00:00</span> / <span id="totalTime">07:00</span>
                </div>
            </div>
            
            <div id="currentSpeaker" style="text-align: center; margin-top: 15px; font-weight: bold; color: #8b4513;"></div>
        </section>

        <section id="questions" class="content-section">
            <h2 class="section-title">📝 Academic Conversation Assessment</h2>
            
            <!-- Multiple Choice Questions (Questions 21-24) -->
            <div class="question-group">
                <h3 class="question-group-title">Questions 21-24: Multiple Choice</h3>
                <p><em>Choose the correct letter, A, B or C.</em></p>
                
                <div class="question">
                    <div class="question-number">Question 21</div>
                    <div class="question-text">What is Anna's main research focus in her PhD thesis?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q21" value="A" id="q21a">
                            <label for="q21a">A) The portrayal of marriage in Victorian novels</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q21" value="B" id="q21b">
                            <label for="q21b">B) Women's agency and independence in Victorian literature</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q21" value="C" id="q21c">
                            <label for="q21c">C) Social class structures in 19th century England</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-number">Question 22</div>
                    <div class="question-text">According to Professor Wright, what is the most important aspect of Anna's literature review?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q22" value="A" id="q22a">
                            <label for="q22a">A) Including contemporary critical responses</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q22" value="B" id="q22b">
                            <label for="q22b">B) Focusing on feminist criticism from the 1970s onwards</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q22" value="C" id="q22c">
                            <label for="q22c">C) Balancing historical context with modern theoretical approaches</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-number">Question 23</div>
                    <div class="question-text">What does Anna plan to do regarding primary sources?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q23" value="A" id="q23a">
                            <label for="q23a">A) Focus exclusively on novels by female authors</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q23" value="B" id="q23b">
                            <label for="q23b">B) Include both male and female Victorian authors</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q23" value="C" id="q23c">
                            <label for="q23c">C) Concentrate on lesser-known Victorian writers</label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <div class="question-number">Question 24</div>
                    <div class="question-text">Professor Wright suggests that Anna should prioritize which theoretical framework?</div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q24" value="A" id="q24a">
                            <label for="q24a">A) Postcolonial theory</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q24" value="B" id="q24b">
                            <label for="q24b">B) Feminist literary theory</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q24" value="C" id="q24c">
                            <label for="q24c">C) New Historicism</label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Matching Questions (Questions 25-30) -->
            <div class="question-group">
                <h3 class="question-group-title">Questions 25-30: Matching</h3>
                <p><em>Match each aspect of Anna's research (Questions 25-30) with the correct approach (A-H).</em></p>
                
                <div class="matching-container">
                    <div class="matching-column">
                        <div class="matching-title">Research Aspects</div>
                        <div class="matching-item" data-question="25">25. Chapter structure organization</div>
                        <div class="matching-item" data-question="26">26. Primary source selection criteria</div>
                        <div class="matching-item" data-question="27">27. Theoretical framework application</div>
                        <div class="matching-item" data-question="28">28. Literature review methodology</div>
                        <div class="matching-item" data-question="29">29. Data analysis approach</div>
                        <div class="matching-item" data-question="30">30. Timeline for completion</div>
                    </div>
                    
                    <div class="matching-column">
                        <div class="matching-title">Approaches</div>
                        <div class="matching-item" data-option="A">A) Chronological progression from early to late Victorian period</div>
                        <div class="matching-item" data-option="B">B) Thematic organization around independence concepts</div>
                        <div class="matching-item" data-option="C">C) Focus on novels with female protagonists showing agency</div>
                        <div class="matching-item" data-option="D">D) Systematic review of existing feminist scholarship</div>
                        <div class="matching-item" data-option="E">E) Integration of feminist theory with historical context</div>
                        <div class="matching-item" data-option="F">F) Close textual analysis of key scenes and passages</div>
                        <div class="matching-item" data-option="G">G) Complete first draft within eighteen months</div>
                        <div class="matching-item" data-option="H">H) Comprehensive survey of 20th century critical responses</div>
                    </div>
                </div>
                
                <div class="matching-answers">
                    <div class="answer-input">
                        <label for="q25">Question 25:</label>
                        <select id="q25" name="q25">
                            <option value="">Select answer</option>
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                            <option value="E">E</option>
                            <option value="F">F</option>
                            <option value="G">G</option>
                            <option value="H">H</option>
                        </select>
                    </div>
                    <div class="answer-input">
                        <label for="q26">Question 26:</label>
                        <select id="q26" name="q26">
                            <option value="">Select answer</option>
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                            <option value="E">E</option>
                            <option value="F">F</option>
                            <option value="G">G</option>
                            <option value="H">H</option>
                        </select>
                    </div>
                    <div class="answer-input">
                        <label for="q27">Question 27:</label>
                        <select id="q27" name="q27">
                            <option value="">Select answer</option>
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                            <option value="E">E</option>
                            <option value="F">F</option>
                            <option value="G">G</option>
                            <option value="H">H</option>
                        </select>
                    </div>
                    <div class="answer-input">
                        <label for="q28">Question 28:</label>
                        <select id="q28" name="q28">
                            <option value="">Select answer</option>
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                            <option value="E">E</option>
                            <option value="F">F</option>
                            <option value="G">G</option>
                            <option value="H">H</option>
                        </select>
                    </div>
                    <div class="answer-input">
                        <label for="q29">Question 29:</label>
                        <select id="q29" name="q29">
                            <option value="">Select answer</option>
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                            <option value="E">E</option>
                            <option value="F">F</option>
                            <option value="G">G</option>
                            <option value="H">H</option>
                        </select>
                    </div>
                    <div class="answer-input">
                        <label for="q30">Question 30:</label>
                        <select id="q30" name="q30">
                            <option value="">Select answer</option>
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                            <option value="E">E</option>
                            <option value="F">F</option>
                            <option value="G">G</option>
                            <option value="H">H</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="submit-section">
                <button class="submit-btn" onclick="submitAnswers()">Submit Answers</button>
            </div>
        </section>

                    <section id="results" class="content-section" style="display: none;">
                <h2 class="section-title">📊 Results & Academic Performance Analysis</h2>
                
                <div class="score-display">
                    <div class="score-number" id="scoreNumber">0</div>
                    <div class="score-text">out of 10 questions correct</div>
                </div>

                <div class="answer-review" id="answerReview">
                    <!-- Answer review will be populated by JavaScript -->
                </div>

                <div class="improvement-tips">
                    <h4>🎓 Academic Part 3 Improvement Tips</h4>
                    <ul id="improvementList">
                        <!-- Tips will be populated by JavaScript -->
                    </ul>
                </div>
            </section>
        </main>
    </div>

    <script>
        // Academic conversation data with TTS integration
        const conversationData = [
            {
                speaker: "Professor David Wright",
                text: "Good afternoon, Anna. Please, have a seat. I've been looking forward to discussing your thesis progress. How are you finding the research process so far?",
                duration: 8000
            },
            {
                speaker: "Anna Rodriguez",
                text: "Thank you, Professor Wright. It's been challenging but fascinating. I'm particularly excited about my focus on women's agency in Victorian literature, especially how female characters navigate social constraints.",
                duration: 10000
            },
            {
                speaker: "Professor David Wright",
                text: "Excellent choice. That's a rich area with significant scholarly potential. Now, let's discuss your literature review. Have you considered the scope? I think balancing historical context with modern theoretical approaches will be crucial.",
                duration: 12000
            },
            {
                speaker: "Anna Rodriguez",
                text: "Yes, I've been thinking about that balance. I want to include both contemporary Victorian responses and feminist criticism from the 1970s onwards. Should I also incorporate more recent theoretical developments?",
                duration: 11000
            },
            {
                speaker: "Professor David Wright",
                text: "Absolutely. Recent developments in feminist literary theory will add depth to your analysis. Now, regarding primary sources, what's your selection strategy? Are you focusing exclusively on female authors?",
                duration: 11000
            },
            {
                speaker: "Anna Rodriguez",
                text: "Actually, I plan to include both male and female Victorian authors. I think examining how both genders portrayed women's agency will provide a more comprehensive perspective. I'll focus specifically on novels with female protagonists showing agency - authors like George Eliot, Charlotte Brontë, but also Charles Dickens and Thomas Hardy.",
                duration: 16000
            },
            {
                speaker: "Professor David Wright",
                text: "Very wise approach. That comparative analysis will strengthen your argument significantly. For your theoretical framework, I strongly suggest prioritizing feminist literary theory, but don't neglect New Historicism - it'll help contextualize the social conditions.",
                duration: 13000
            },
            {
                speaker: "Anna Rodriguez",
                text: "That makes sense. I was leaning toward feminist theory as my primary framework. For my chapter organization, should I structure it chronologically or thematically? I'm thinking thematic organization around concepts of independence might work better.",
                duration: 12000
            },
            {
                speaker: "Professor David Wright",
                text: "Thematic organization is indeed more sophisticated for this topic. You could explore economic independence, social autonomy, intellectual freedom - each as separate chapters. For your methodology, focus on close textual analysis of key scenes and passages.",
                duration: 14000
            },
            {
                speaker: "Anna Rodriguez",
                text: "Perfect. And for my literature review methodology, should I do a systematic review of existing feminist scholarship? I want to ensure I'm not missing important critical voices.",
                duration: 10000
            },
            {
                speaker: "Professor David Wright",
                text: "Yes, systematic review is essential. Also consider including a comprehensive survey of 20th century critical responses - they'll show how interpretations of women's agency have evolved over time. This historical progression of criticism will strengthen your theoretical foundation. What's your timeline looking like?",
                duration: 14000
            },
            {
                speaker: "Anna Rodriguez",
                text: "I'm hoping to complete my first draft within eighteen months. Is that realistic? I want to ensure I have enough time for thorough research and multiple revisions.",
                duration: 9000
            },
            {
                speaker: "Professor David Wright",
                text: "Eighteen months is ambitious but achievable if you maintain consistent progress. Remember, this research contributes to ongoing scholarly conversations about Victorian women's literature. Your fresh perspective on agency will be valuable.",
                duration: 12000
            },
            {
                speaker: "Anna Rodriguez",
                text: "Thank you for the encouragement. I'm confident this research will offer new insights into how Victorian literature both constrained and empowered women's voices in literature.",
                duration: 8000
            },
            {
                speaker: "Professor David Wright",
                text: "Excellent. I look forward to seeing your progress in our next meeting. Good luck with your research, Anna.",
                duration: 5000
            },
            {
                speaker: "Anna Rodriguez",
                text: "Thank you so much, Professor Wright. I really appreciate your guidance and support.",
                duration: 4000
            },
            {
                speaker: "pause",
                text: "",
                duration: 3000
            }
        ];

        // Audio control variables
        let currentIndex = 0;
        let isPlaying = false;
        let speechSynthesis = window.speechSynthesis;
        let currentUtterance = null;
        let totalDuration = conversationData.reduce((sum, item) => sum + item.duration, 0) + 120000; // Add 2 minutes buffer for TTS and pauses
        let currentTime = 0;
        let audioInterval;

        // Voice configuration for different speakers
        const voiceConfig = {
            "Professor David Wright": {
                rate: 0.8,
                pitch: 0.9,
                volume: 0.9,
                lang: 'en-GB'
            },
            "Anna Rodriguez": {
                rate: 0.9,
                pitch: 1.1,
                volume: 0.9,
                lang: 'en-US'
            }
        };

        function highlightCurrentSpeaker(speakerName) {
            // Reset all speaker cards
            document.querySelectorAll('.speaker-card').forEach(card => {
                card.classList.remove('active');
            });
            
            // Handle pause or end of conversation
            if (speakerName === "pause" || !speakerName) {
                document.getElementById('currentSpeaker').textContent = '⏸️ Academic conversation pausing...';
                return;
            }
            
            // Highlight current speaker
            if (speakerName === "Professor David Wright") {
                document.getElementById('speaker1').classList.add('active');
                document.getElementById('currentSpeaker').textContent = `🗣️ Currently speaking: Professor Wright`;
            } else if (speakerName === "Anna Rodriguez") {
                document.getElementById('speaker2').classList.add('active');
                document.getElementById('currentSpeaker').textContent = `🗣️ Currently speaking: Anna Rodriguez`;
            }
        }

        function updateProgress() {
            if (isPlaying) {
                currentTime += 100;
                const progress = Math.min((currentTime / totalDuration) * 100, 100);
                document.getElementById('progressFill').style.width = progress + '%';
                
                // Update time display
                const currentMinutes = Math.floor(currentTime / 60000);
                const currentSeconds = Math.floor((currentTime % 60000) / 1000);
                document.getElementById('currentTime').textContent = 
                    `${currentMinutes.toString().padStart(2, '0')}:${currentSeconds.toString().padStart(2, '0')}`;
                
                // Don't auto-stop based on time - let the conversation segments complete naturally
                // The stopAudio() will be called when playCurrentSegment() reaches the end
            }
        }

        function formatTime(milliseconds) {
            const minutes = Math.floor(milliseconds / 60000);
            const seconds = Math.floor((milliseconds % 60000) / 1000);
            return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function playAudio() {
            if (currentIndex >= conversationData.length) {
                currentIndex = 0;
                currentTime = 0;
            }
            
            isPlaying = true;
            document.getElementById('playBtn').disabled = true;
            document.getElementById('playBtn').textContent = '🔊 Playing...';
            
            audioInterval = setInterval(updateProgress, 100);
            playCurrentSegment();
        }

        function playCurrentSegment() {
            if (!isPlaying) {
                return;
            }
            
            if (currentIndex >= conversationData.length) {
                console.log('🎯 Reached end of conversation data');
                stopAudio();
                return;
            }

            const segment = conversationData[currentIndex];
            
            // Handle pause segments
            if (segment.speaker === "pause") {
                console.log(`⏸️ Playing pause segment ${currentIndex + 1} for ${segment.duration}ms`);
                highlightCurrentSpeaker("pause");
                currentIndex++;
                setTimeout(() => {
                    if (isPlaying) {
                        if (currentIndex < conversationData.length) {
                            playCurrentSegment();
                        } else {
                            console.log('🎯 All conversation segments completed after pause');
                            stopAudio();
                        }
                    }
                }, segment.duration);
                return;
            }

            highlightCurrentSpeaker(segment.speaker);

            // Create speech utterance
            currentUtterance = new SpeechSynthesisUtterance(segment.text);
            
            // Apply voice configuration
            const config = voiceConfig[segment.speaker];
            if (config) {
                currentUtterance.rate = config.rate;
                currentUtterance.pitch = config.pitch;
                currentUtterance.volume = config.volume;
                currentUtterance.lang = config.lang;
            }

            // Set voice based on language and gender
            const voices = speechSynthesis.getVoices();
            if (segment.speaker === "Professor David Wright") {
                const britishVoice = voices.find(voice => 
                    voice.lang.includes('en-GB') && voice.name.toLowerCase().includes('male')
                ) || voices.find(voice => voice.lang.includes('en-GB'));
                if (britishVoice) currentUtterance.voice = britishVoice;
            } else if (segment.speaker === "Anna Rodriguez") {
                const americanVoice = voices.find(voice => 
                    voice.lang.includes('en-US') && voice.name.toLowerCase().includes('female')
                ) || voices.find(voice => voice.lang.includes('en-US'));
                if (americanVoice) currentUtterance.voice = americanVoice;
            }

            currentUtterance.onstart = () => {
                console.log(`🎤 Started segment ${currentIndex + 1}: ${segment.speaker}`);
            };

            currentUtterance.onend = () => {
                console.log(`✅ Completed segment ${currentIndex + 1}: ${segment.speaker}`);
                currentIndex++;
                // Add natural pause between speakers (2 seconds for academic conversation)
                setTimeout(() => {
                    if (isPlaying) {
                        if (currentIndex < conversationData.length) {
                            playCurrentSegment();
                        } else {
                            console.log('🎯 All conversation segments completed');
                            stopAudio();
                        }
                    }
                }, 2000);
            };

            currentUtterance.onerror = (event) => {
                console.error(`❌ Error in segment ${currentIndex + 1}:`, event.error);
                // Continue to next segment on error
                currentIndex++;
                setTimeout(() => {
                    if (isPlaying && currentIndex < conversationData.length) {
                        playCurrentSegment();
                    } else {
                        stopAudio();
                    }
                }, 1000);
            };

            try {
                speechSynthesis.speak(currentUtterance);
            } catch (error) {
                console.error(`❌ Failed to start TTS for segment ${currentIndex + 1}:`, error);
                // Continue to next segment
                currentIndex++;
                setTimeout(() => {
                    if (isPlaying && currentIndex < conversationData.length) {
                        playCurrentSegment();
                    } else {
                        stopAudio();
                    }
                }, 1000);
            }
        }

        function stopAudio() {
            isPlaying = false;
            speechSynthesis.cancel();
            clearInterval(audioInterval);
            
            // Show completion message if audio played to the end
            if (currentIndex >= conversationData.length) {
                document.getElementById('currentSpeaker').textContent = '✅ Academic conversation completed. You may now answer the questions.';
                setTimeout(() => {
                    document.getElementById('currentSpeaker').textContent = '';
                }, 3000);
            } else {
                document.getElementById('currentSpeaker').textContent = '';
            }
            
            currentIndex = 0;
            currentTime = 0;
            
            document.getElementById('progressFill').style.width = '0%';
            document.getElementById('currentTime').textContent = '00:00';
            document.querySelectorAll('.speaker-card').forEach(card => {
                card.classList.remove('active');
            });
            
            document.getElementById('playBtn').disabled = false;
            document.getElementById('playBtn').textContent = '▶️ Play';
        }

        // Correct answers for assessment
        const correctAnswers = {
            q21: 'B', // Women's agency and independence in Victorian literature
            q22: 'C', // Balancing historical context with modern theoretical approaches
            q23: 'B', // Include both male and female Victorian authors
            q24: 'B', // Feminist literary theory
            q25: 'B', // Thematic organization around independence concepts
            q26: 'C', // Focus on novels with female protagonists showing agency
            q27: 'E', // Integration of feminist theory with historical context
            q28: 'D', // Systematic review of existing feminist scholarship
            q29: 'F', // Close textual analysis of key scenes and passages
            q30: 'G'  // Complete first draft within eighteen months
        };

        // Question explanations
        const explanations = {
            q21: 'Anna states clearly: "My research focuses on women\'s agency and independence in Victorian literature, specifically how female characters navigate social constraints."',
            q22: 'Professor Wright advises: "The key will be balancing historical context with modern theoretical approaches to ensure your analysis is both historically grounded and theoretically sophisticated."',
            q23: 'Anna explains: "I want to include both male and female Victorian authors to provide a comprehensive perspective on how gender agency was portrayed across different viewpoints."',
            q24: 'Professor Wright suggests: "Feminist literary theory would be most appropriate for your thesis framework, as it directly addresses questions of agency and independence that are central to your research."',
            q25: 'The conversation reveals Anna\'s preference: "I\'m thinking about organizing it thematically around different concepts of independence" which Professor Wright supports.',
            q26: 'Anna discusses her approach: "I want to focus on novels with female protagonists who demonstrate agency and challenge Victorian social norms."',
            q27: 'Professor Wright emphasizes: "The integration of feminist theory with historical context will be crucial for establishing your theoretical framework."',
            q28: 'In the methodology discussion, they agree on: "A systematic review of existing feminist scholarship to establish your theoretical foundation."',
            q29: 'The analysis approach involves: "Close textual analysis of key scenes and passages that demonstrate female agency and independence."',
            q30: 'Professor Wright sets the timeline: "You should aim to complete your first draft within eighteen months to allow time for revisions and feedback."'
        };

        function submitAnswers() {
            let score = 0;
            const answers = {};
            const reviewHTML = [];
            
            // Check multiple choice answers (21-24)
            for (let i = 21; i <= 24; i++) {
                const questionName = `q${i}`;
                const selectedOption = document.querySelector(`input[name="${questionName}"]:checked`);
                const answer = selectedOption ? selectedOption.value : '';
                answers[questionName] = answer;
                
                const correct = correctAnswers[questionName];
                const isCorrect = answer === correct;
                if (isCorrect) score++;
                
                reviewHTML.push(`
                    <div class="review-item ${isCorrect ? 'correct' : 'incorrect'}">
                        <strong>Question ${i}:</strong> ${isCorrect ? '✅' : '❌'}<br>
                        <strong>Your answer:</strong> ${answer || '<em>No answer</em>'}<br>
                        <strong>Correct answer:</strong> ${correctAnswers[questionName]}<br>
                        <strong>Explanation:</strong> ${explanations[questionName]}
                    </div>
                `);
            }

            // Check matching answers (25-30)
            for (let i = 25; i <= 30; i++) {
                const questionName = `q${i}`;
                const answer = document.getElementById(questionName).value;
                answers[questionName] = answer;
                
                const correct = correctAnswers[questionName];
                const isCorrect = answer === correct;
                if (isCorrect) score++;
                
                reviewHTML.push(`
                    <div class="review-item ${isCorrect ? 'correct' : 'incorrect'}">
                        <strong>Question ${i}:</strong> ${isCorrect ? '✅' : '❌'}<br>
                        <strong>Your answer:</strong> ${answer || '<em>No answer</em>'}<br>
                        <strong>Correct answer:</strong> ${correctAnswers[questionName]}<br>
                        <strong>Explanation:</strong> ${explanations[questionName]}
                    </div>
                `);
            }
            
            // Update score display
            document.getElementById('scoreNumber').textContent = score;
            document.getElementById('answerReview').innerHTML = reviewHTML.join('');
            
            // Generate improvement tips
            const tips = generateImprovementTips(score);
            const tipsHTML = tips.map(tip => `<li>${tip}</li>`).join('');
            document.getElementById('improvementList').innerHTML = tipsHTML;
            
            // Show results section
            document.getElementById('results').style.display = 'block';
            document.getElementById('results').scrollIntoView({ 
                behavior: 'smooth', 
                block: 'start' 
            });
        }

        function generateImprovementTips(score) {
            const tips = [];
            
            if (score <= 3) {
                tips.push("Focus on listening for specific details in academic thesis supervision conversations");
                tips.push("Practice understanding literature research methodology and PhD supervision vocabulary");
                tips.push("Work on following academic discussions about theoretical frameworks and research approaches");
                tips.push("Listen to university supervision meetings and literary research discussions");
            } else if (score <= 6) {
                tips.push("Develop better prediction skills by reading question stems before listening to academic conversations");
                tips.push("Practice distinguishing between different research approaches and theoretical frameworks");
                tips.push("Work on matching questions with academic literature vocabulary and research terminology");
                tips.push("Focus on understanding PhD supervision dynamics and research planning discussions");
            } else if (score <= 8) {
                tips.push("Fine-tune your ability to catch specific details in academic supervision conversations");
                tips.push("Practice following complex research methodology discussions and theoretical framework planning");
                tips.push("Work on maintaining concentration throughout longer PhD supervision meetings");
                tips.push("Review vocabulary related to literary theory, research methodology, and academic planning");
            } else {
                tips.push("Excellent work! Continue practicing with authentic IELTS Academic Part 3 materials");
                tips.push("Focus on time management to complete both multiple choice and matching questions efficiently");
                tips.push("Practice with different academic accents to prepare for test day variety");
                tips.push("Consider helping others to reinforce your own academic conversation listening skills");
            }
            
            return tips;
        }

        // Navigation and menu functions
        function handleBackButton() {
            console.log('🔄 Back button clicked from IELTS Academic Listening Part 3 Practice 3 - Going to introduction');
            window.location.href = 'IELTS_Academic_Listening_Introduction.html';
        }

        function toggleMenu() {
            const menu = document.getElementById('slideMenu');
            const container = document.getElementById('container');
            const menuToggle = document.getElementById('menuToggle');
            
            menu.classList.toggle('collapsed');
            container.classList.toggle('menu-collapsed');
            menuToggle.classList.toggle('collapsed');
        }

        function navigateToSection(sectionId) {
            document.getElementById(sectionId).scrollIntoView({ 
                behavior: 'smooth', 
                block: 'start' 
            });
            
            // Auto-collapse menu on mobile
            if (window.innerWidth <= 768) {
                toggleMenu();
            }
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                handleBackButton();
            } else if (event.code === 'Space' && !isPlaying) {
                event.preventDefault();
                playAudio();
            } else if (event.ctrlKey && event.key === 'Tab') {
                event.preventDefault();
                toggleMenu();
            }
        });

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🎓 IELTS Academic Listening Part 3 Practice 3 - Literature Department Research Planning loaded');
            
            // Debug audio system
            console.log('🔊 Browser audio capabilities:');
            console.log('- speechSynthesis available:', 'speechSynthesis' in window);
            console.log('- Web Audio API available:', 'AudioContext' in window || 'webkitAudioContext' in window);
            console.log('- User agent:', navigator.userAgent);
            
            // Test speech synthesis availability
            if ('speechSynthesis' in window) {
                setTimeout(() => {
                    const voices = speechSynthesis.getVoices();
                    console.log('🎤 Initial voices check:', voices.length, 'voices available');
                    if (voices.length === 0) {
                        console.log('⏳ Waiting for voices to load...');
                        speechSynthesis.addEventListener('voiceschanged', function() {
                            const newVoices = speechSynthesis.getVoices();
                            console.log('🎤 Voices loaded:', newVoices.length, 'voices now available');
                        });
                    }
                }, 1000);
            }
            
            // Set total time display
            document.getElementById('totalTime').textContent = formatTime(totalDuration);
            
            // Interactive matching functionality
            const matchingItems = document.querySelectorAll('.matching-item');
            
            matchingItems.forEach(item => {
                item.addEventListener('click', function() {
                    // Toggle selection
                    this.classList.toggle('selected');
                });
            });
        });

        // Clean up on page unload
        window.addEventListener('beforeunload', function() {
            if ('speechSynthesis' in window) {
                speechSynthesis.cancel();
            }
            if (audioInterval) {
                clearInterval(audioInterval);
            }
        });
    </script>
</body>
</html> 